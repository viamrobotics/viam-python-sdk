<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>viam.app.data_client &mdash; Viam Python SDK  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=eafc0fe6" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=b3ba4146"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Viam Python SDK
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/example.html">Example usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.viam.com">Full Viam Docs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../autoapi/viam/components/index.html">viam.components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../autoapi/viam/services/index.html">viam.services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../autoapi/viam/robot/index.html">viam.robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../autoapi/viam/app/index.html">viam.app</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../autoapi/viam/resource/index.html">viam.resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../autoapi/viam/module/index.html">viam.module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../autoapi/viam/media/index.html">viam.media</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../autoapi/viam/rpc/index.html">viam.rpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../autoapi/viam/proto/index.html">viam.proto</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Viam Python SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">viam.app.data_client</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for viam.app.data_client</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">import</span> <span class="nn">bson</span>
<span class="kn">from</span> <span class="nn">google.protobuf.struct_pb2</span> <span class="kn">import</span> <span class="n">Struct</span>
<span class="kn">from</span> <span class="nn">grpclib.client</span> <span class="kn">import</span> <span class="n">Channel</span><span class="p">,</span> <span class="n">Stream</span>

<span class="kn">from</span> <span class="nn">viam</span> <span class="kn">import</span> <span class="n">logging</span>
<span class="kn">from</span> <span class="nn">viam.proto.app.data</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">AddBinaryDataToDatasetByIDsRequest</span><span class="p">,</span>
    <span class="n">AddBoundingBoxToImageByIDRequest</span><span class="p">,</span>
    <span class="n">AddBoundingBoxToImageByIDResponse</span><span class="p">,</span>
    <span class="n">AddTagsToBinaryDataByFilterRequest</span><span class="p">,</span>
    <span class="n">AddTagsToBinaryDataByIDsRequest</span><span class="p">,</span>
    <span class="n">BinaryData</span><span class="p">,</span>
    <span class="n">BinaryDataByFilterRequest</span><span class="p">,</span>
    <span class="n">BinaryDataByFilterResponse</span><span class="p">,</span>
    <span class="n">BinaryDataByIDsRequest</span><span class="p">,</span>
    <span class="n">BinaryDataByIDsResponse</span><span class="p">,</span>
    <span class="n">BinaryID</span><span class="p">,</span>
    <span class="n">BoundingBoxLabelsByFilterRequest</span><span class="p">,</span>
    <span class="n">BoundingBoxLabelsByFilterResponse</span><span class="p">,</span>
    <span class="n">CaptureInterval</span><span class="p">,</span>
    <span class="n">CaptureMetadata</span><span class="p">,</span>
    <span class="n">ConfigureDatabaseUserRequest</span><span class="p">,</span>
    <span class="n">DataRequest</span><span class="p">,</span>
    <span class="n">DataServiceStub</span><span class="p">,</span>
    <span class="n">DeleteBinaryDataByFilterRequest</span><span class="p">,</span>
    <span class="n">DeleteBinaryDataByFilterResponse</span><span class="p">,</span>
    <span class="n">DeleteBinaryDataByIDsRequest</span><span class="p">,</span>
    <span class="n">DeleteBinaryDataByIDsResponse</span><span class="p">,</span>
    <span class="n">DeleteTabularDataRequest</span><span class="p">,</span>
    <span class="n">DeleteTabularDataResponse</span><span class="p">,</span>
    <span class="n">ExportTabularDataRequest</span><span class="p">,</span>
    <span class="n">ExportTabularDataResponse</span><span class="p">,</span>
    <span class="n">Filter</span><span class="p">,</span>
    <span class="n">GetDatabaseConnectionRequest</span><span class="p">,</span>
    <span class="n">GetDatabaseConnectionResponse</span><span class="p">,</span>
    <span class="n">GetLatestTabularDataRequest</span><span class="p">,</span>
    <span class="n">GetLatestTabularDataResponse</span><span class="p">,</span>
    <span class="n">Order</span><span class="p">,</span>
    <span class="n">RemoveBinaryDataFromDatasetByIDsRequest</span><span class="p">,</span>
    <span class="n">RemoveBoundingBoxFromImageByIDRequest</span><span class="p">,</span>
    <span class="n">RemoveTagsFromBinaryDataByFilterRequest</span><span class="p">,</span>
    <span class="n">RemoveTagsFromBinaryDataByFilterResponse</span><span class="p">,</span>
    <span class="n">RemoveTagsFromBinaryDataByIDsRequest</span><span class="p">,</span>
    <span class="n">RemoveTagsFromBinaryDataByIDsResponse</span><span class="p">,</span>
    <span class="n">TabularDataByFilterRequest</span><span class="p">,</span>
    <span class="n">TabularDataByFilterResponse</span><span class="p">,</span>
    <span class="n">TabularDataByMQLRequest</span><span class="p">,</span>
    <span class="n">TabularDataByMQLResponse</span><span class="p">,</span>
    <span class="n">TabularDataBySQLRequest</span><span class="p">,</span>
    <span class="n">TabularDataBySQLResponse</span><span class="p">,</span>
    <span class="n">TagsByFilterRequest</span><span class="p">,</span>
    <span class="n">TagsByFilterResponse</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">viam.proto.app.dataset</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">CreateDatasetRequest</span><span class="p">,</span>
    <span class="n">CreateDatasetResponse</span><span class="p">,</span>
    <span class="n">Dataset</span><span class="p">,</span>
    <span class="n">DatasetServiceStub</span><span class="p">,</span>
    <span class="n">DeleteDatasetRequest</span><span class="p">,</span>
    <span class="n">ListDatasetsByIDsRequest</span><span class="p">,</span>
    <span class="n">ListDatasetsByIDsResponse</span><span class="p">,</span>
    <span class="n">ListDatasetsByOrganizationIDRequest</span><span class="p">,</span>
    <span class="n">ListDatasetsByOrganizationIDResponse</span><span class="p">,</span>
    <span class="n">RenameDatasetRequest</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">viam.proto.app.datasync</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">DataCaptureUploadMetadata</span><span class="p">,</span>
    <span class="n">DataCaptureUploadRequest</span><span class="p">,</span>
    <span class="n">DataCaptureUploadResponse</span><span class="p">,</span>
    <span class="n">DataSyncServiceStub</span><span class="p">,</span>
    <span class="n">DataType</span><span class="p">,</span>
    <span class="n">FileData</span><span class="p">,</span>
    <span class="n">FileUploadRequest</span><span class="p">,</span>
    <span class="n">FileUploadResponse</span><span class="p">,</span>
    <span class="n">SensorData</span><span class="p">,</span>
    <span class="n">SensorMetadata</span><span class="p">,</span>
    <span class="n">StreamingDataCaptureUploadRequest</span><span class="p">,</span>
    <span class="n">StreamingDataCaptureUploadResponse</span><span class="p">,</span>
    <span class="n">UploadMetadata</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">viam.utils</span> <span class="kn">import</span> <span class="n">ValueTypes</span><span class="p">,</span> <span class="n">_alias_param</span><span class="p">,</span> <span class="n">create_filter</span><span class="p">,</span> <span class="n">datetime_to_timestamp</span><span class="p">,</span> <span class="n">struct_to_dict</span>

<span class="n">LOGGER</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="DataClient"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient">[docs]</a><span class="k">class</span> <span class="nc">DataClient</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;gRPC client for uploading and retrieving data from app.</span>

<span class="sd">    Constructor is used by `ViamClient` to instantiate relevant service stubs. Calls to `DataClient` methods should be made through</span>
<span class="sd">    `ViamClient`.</span>

<span class="sd">    Establish a Connection::</span>

<span class="sd">        import asyncio</span>

<span class="sd">        from viam.rpc.dial import DialOptions, Credentials</span>
<span class="sd">        from viam.app.viam_client import ViamClient</span>


<span class="sd">        async def connect() -&gt; ViamClient:</span>
<span class="sd">            # Replace &quot;&lt;API-KEY&gt;&quot; (including brackets) with your API key and &quot;&lt;API-KEY-ID&gt;&quot; with your API key ID</span>
<span class="sd">            dial_options = DialOptions.with_api_key(&quot;&lt;API-KEY&gt;&quot;, &quot;&lt;API-KEY-ID&gt;&quot;)</span>
<span class="sd">            return await ViamClient.create_from_dial_options(dial_options)</span>


<span class="sd">        async def main():</span>
<span class="sd">            # Make a ViamClient</span>
<span class="sd">            viam_client = await connect()</span>
<span class="sd">            # Instantiate a DataClient to run data client API methods on</span>
<span class="sd">            data_client = viam_client.data_client</span>

<span class="sd">            viam_client.close()</span>

<span class="sd">        if __name__ == &#39;__main__&#39;:</span>
<span class="sd">            asyncio.run(main())</span>


<span class="sd">    For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/&gt;`_.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="DataClient.TabularData"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.TabularData">[docs]</a>    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">TabularData</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Class representing a piece of tabular data and associated metadata.&quot;&quot;&quot;</span>

        <span class="n">data</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The requested data&quot;&quot;&quot;</span>

        <span class="n">metadata</span><span class="p">:</span> <span class="n">CaptureMetadata</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The metadata associated with the data&quot;&quot;&quot;</span>

        <span class="n">time_requested</span><span class="p">:</span> <span class="n">datetime</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The time the data were requested&quot;&quot;&quot;</span>

        <span class="n">time_received</span><span class="p">:</span> <span class="n">datetime</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The time the data were received&quot;&quot;&quot;</span>

<div class="viewcode-block" id="DataClient.TabularData.__str__"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.TabularData.__str__">[docs]</a>        <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="si">}</span><span class="s2">Time requested: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">time_requested</span><span class="si">}</span><span class="se">\n</span><span class="s2">Time received: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">time_received</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span></div>

<div class="viewcode-block" id="DataClient.TabularData.__eq__"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.TabularData.__eq__">[docs]</a>        <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DataClient</span><span class="o">.</span><span class="n">TabularData</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div></div>

<div class="viewcode-block" id="DataClient.TabularDataPoint"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.TabularDataPoint">[docs]</a>    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">TabularDataPoint</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Represents a tabular data point and its associated metadata.&quot;&quot;&quot;</span>

        <span class="n">part_id</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The robot part ID&quot;&quot;&quot;</span>

        <span class="n">resource_name</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The resource name&quot;&quot;&quot;</span>

        <span class="n">resource_api</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The resource API. Ex: `rdk:component:sensor`&quot;&quot;&quot;</span>

        <span class="n">method_name</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The method used for data capture. Ex: `Readings`&quot;&quot;&quot;</span>

        <span class="n">time_captured</span><span class="p">:</span> <span class="n">datetime</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The time at which the data point was captured&quot;&quot;&quot;</span>

        <span class="n">organization_id</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The organization ID&quot;&quot;&quot;</span>

        <span class="n">location_id</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The location ID&quot;&quot;&quot;</span>

        <span class="n">robot_name</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The robot name&quot;&quot;&quot;</span>

        <span class="n">robot_id</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The robot ID&quot;&quot;&quot;</span>

        <span class="n">part_name</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The robot part name&quot;&quot;&quot;</span>

        <span class="n">method_parameters</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueTypes</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Additional parameters associated with the data capture method&quot;&quot;&quot;</span>

        <span class="n">tags</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of tags associated with the data point&quot;&quot;&quot;</span>

        <span class="n">payload</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueTypes</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The captured data&quot;&quot;&quot;</span>

<div class="viewcode-block" id="DataClient.TabularDataPoint.__str__"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.TabularDataPoint.__str__">[docs]</a>        <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;TabularDataPoint(&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;robot=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">robot_name</span><span class="si">}</span><span class="s2">&#39; (id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">robot_id</span><span class="si">}</span><span class="s2">), &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;part=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">part_name</span><span class="si">}</span><span class="s2">&#39; (id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">part_id</span><span class="si">}</span><span class="s2">), &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;resource=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_name</span><span class="si">}</span><span class="s2">&#39; (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_api</span><span class="si">}</span><span class="s2">), &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;method=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="si">}</span><span class="s2">&#39;, &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;org=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">organization_id</span><span class="si">}</span><span class="s2">, &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;location=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">location_id</span><span class="si">}</span><span class="s2">, &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;time=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">time_captured</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39;, &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;params=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method_parameters</span><span class="si">}</span><span class="s2">, &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;tags=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="si">}</span><span class="s2">, &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;payload=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">payload</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="DataClient.TabularDataPoint.__eq__"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.TabularDataPoint.__eq__">[docs]</a>        <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DataClient</span><span class="o">.</span><span class="n">TabularDataPoint</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

        <span class="nd">@property</span>
        <span class="k">def</span> <span class="nf">resource_subtype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;`TabularDataPoint.resource_subtype` is deprecated. Use `TabularDataPoint.resource_api` instead.&quot;</span><span class="p">,</span>
                <span class="ne">DeprecationWarning</span><span class="p">,</span>
                <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_api</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">Channel</span><span class="p">,</span> <span class="n">metadata</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a `DataClient` that maintains a connection to app.</span>

<span class="sd">        Args:</span>
<span class="sd">            channel (grpclib.client.Channel): Connection to app.</span>
<span class="sd">            metadata (Mapping[str, str]): Required authorization token to send requests to app.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="o">=</span> <span class="n">metadata</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span> <span class="o">=</span> <span class="n">DataServiceStub</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_sync_client</span> <span class="o">=</span> <span class="n">DataSyncServiceStub</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_client</span> <span class="o">=</span> <span class="n">DatasetServiceStub</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">=</span> <span class="n">channel</span>

    <span class="n">_data_client</span><span class="p">:</span> <span class="n">DataServiceStub</span>
    <span class="n">_data_sync_client</span><span class="p">:</span> <span class="n">DataSyncServiceStub</span>
    <span class="n">_dataset_client</span><span class="p">:</span> <span class="n">DatasetServiceStub</span>
    <span class="n">_metadata</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="n">_channel</span><span class="p">:</span> <span class="n">Channel</span>

<div class="viewcode-block" id="DataClient.tabular_data_by_filter"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.tabular_data_by_filter">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">tabular_data_by_filter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Filter</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">sort_order</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Order</span><span class="o">.</span><span class="n">ValueType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">last</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">count_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_internal_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">TabularData</span><span class="p">],</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Filter and download tabular data. The data will be paginated into pages of `limit` items, and the pagination ID will be included</span>
<span class="sd">        in the returned tuple. If a destination is provided, the data will be saved to that file.</span>
<span class="sd">        If the file is not empty, it will be overwritten.</span>

<span class="sd">        ::</span>

<span class="sd">            from viam.utils import create_filter</span>

<span class="sd">            my_data = []</span>
<span class="sd">            my_filter = create_filter(component_name=&quot;motor-1&quot;)</span>
<span class="sd">            last = None</span>
<span class="sd">            while True:</span>
<span class="sd">                tabular_data, count, last = await data_client.tabular_data_by_filter(my_filter, last=last)</span>
<span class="sd">                if not tabular_data:</span>
<span class="sd">                    break</span>
<span class="sd">                my_data.extend(tabular_data)</span>

<span class="sd">            print(f&quot;My data: {my_data}&quot;)</span>

<span class="sd">        Args:</span>
<span class="sd">            filter (viam.proto.app.data.Filter): Optional `Filter` specifying tabular data to retrieve. No `Filter` implies all tabular</span>
<span class="sd">                data.</span>
<span class="sd">            limit (int): The maximum number of entries to include in a page. Defaults to 50 if unspecified.</span>
<span class="sd">            sort_order (viam.proto.app.data.Order): The desired sort order of the data.</span>
<span class="sd">            last (str): Optional string indicating the object identifier of the last-returned data.</span>
<span class="sd">                        This object identifier is returned by calls to `TabularDataByFilter` as the `last` value.</span>
<span class="sd">                        If provided, the server will return the next data entries after the last object identifier.</span>
<span class="sd">            count_only (bool): Whether to return only the total count of entries.</span>
<span class="sd">            include_internal_data (bool): Whether to return the internal data. Internal data is used for Viam-specific data ingestion,</span>
<span class="sd">                                          like cloud SLAM. Defaults to `False`.</span>
<span class="sd">            dest (str): Optional filepath for writing retrieved data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple[List[TabularData], int, str]: A tuple containing the following:</span>
<span class="sd">            List[TabularData]: The tabular data,</span>
<span class="sd">            int: The count (number of entries),</span>
<span class="sd">            str: The last-returned page ID.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#tabulardatabyfilter&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">filter</span> <span class="o">=</span> <span class="nb">filter</span> <span class="k">if</span> <span class="nb">filter</span> <span class="k">else</span> <span class="n">Filter</span><span class="p">()</span>

        <span class="n">data_request</span> <span class="o">=</span> <span class="n">DataRequest</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">limit</span><span class="p">:</span>
            <span class="n">data_request</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="n">limit</span>
        <span class="k">if</span> <span class="n">sort_order</span><span class="p">:</span>
            <span class="n">data_request</span><span class="o">.</span><span class="n">sort_order</span> <span class="o">=</span> <span class="n">sort_order</span>
        <span class="k">if</span> <span class="n">last</span><span class="p">:</span>
            <span class="n">data_request</span><span class="o">.</span><span class="n">last</span> <span class="o">=</span> <span class="n">last</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TabularDataByFilterRequest</span><span class="p">(</span><span class="n">data_request</span><span class="o">=</span><span class="n">data_request</span><span class="p">,</span> <span class="n">count_only</span><span class="o">=</span><span class="n">count_only</span><span class="p">,</span> <span class="n">include_internal_data</span><span class="o">=</span><span class="n">include_internal_data</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">TabularDataByFilterResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">TabularDataByFilter</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">DataClient</span><span class="o">.</span><span class="n">TabularData</span><span class="p">(</span>
                <span class="n">struct_to_dict</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">data</span><span class="p">),</span>
                <span class="n">response</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">struct</span><span class="o">.</span><span class="n">metadata_index</span><span class="p">],</span>
                <span class="n">struct</span><span class="o">.</span><span class="n">time_requested</span><span class="o">.</span><span class="n">ToDatetime</span><span class="p">(),</span>
                <span class="n">struct</span><span class="o">.</span><span class="n">time_received</span><span class="o">.</span><span class="n">ToDatetime</span><span class="p">(),</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">struct</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="n">dest</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">data</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">file</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to write tabular data to file </span><span class="si">{</span><span class="n">dest</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">count</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">last</span></div>

<div class="viewcode-block" id="DataClient.tabular_data_by_sql"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.tabular_data_by_sql">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">tabular_data_by_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">organization_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sql_query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="n">ValueTypes</span><span class="p">,</span> <span class="n">datetime</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Obtain unified tabular data and metadata, queried with SQL.</span>
<span class="sd">        Make sure your API key has permissions at the organization level in order to use this.</span>

<span class="sd">        ::</span>

<span class="sd">            data = await data_client.tabular_data_by_sql(</span>
<span class="sd">                organization_id=&quot;&lt;YOUR-ORG-ID&gt;&quot;,</span>
<span class="sd">                sql_query=&quot;SELECT * FROM readings LIMIT 5&quot;</span>
<span class="sd">            )</span>

<span class="sd">        Args:</span>
<span class="sd">            organization_id (str): The ID of the organization that owns the data.</span>
<span class="sd">                You can obtain your organization ID from the Viam app&#39;s organization settings page.</span>
<span class="sd">            sql_query (str): The SQL query to run.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[Dict[str, Union[ValueTypes, datetime]]]: An array of decoded BSON data objects.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#tabulardatabysql&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TabularDataBySQLRequest</span><span class="p">(</span><span class="n">organization_id</span><span class="o">=</span><span class="n">organization_id</span><span class="p">,</span> <span class="n">sql_query</span><span class="o">=</span><span class="n">sql_query</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">TabularDataBySQLResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">TabularDataBySQL</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">bson</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">bson_bytes</span><span class="p">)</span> <span class="k">for</span> <span class="n">bson_bytes</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">raw_data</span><span class="p">]</span></div>

<div class="viewcode-block" id="DataClient.tabular_data_by_mql"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.tabular_data_by_mql">[docs]</a>    <span class="nd">@_alias_param</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">,</span> <span class="n">param_alias</span><span class="o">=</span><span class="s2">&quot;mql_binary&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">tabular_data_by_mql</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">organization_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="n">ValueTypes</span><span class="p">,</span> <span class="n">datetime</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Obtain unified tabular data and metadata, queried with MQL.</span>

<span class="sd">        ::</span>

<span class="sd">            import bson</span>

<span class="sd">            tabular_data = await data_client.tabular_data_by_mql(organization_id=&quot;&lt;YOUR-ORG-ID&gt;&quot;, mql_query=[</span>
<span class="sd">                { &#39;$match&#39;: { &#39;location_id&#39;: &#39;&lt;YOUR-LOCATION-ID&gt;&#39; } },</span>
<span class="sd">                { &quot;$limit&quot;: 5 }</span>
<span class="sd">            ])</span>

<span class="sd">            print(f&quot;Tabular Data: {tabular_data}&quot;)</span>

<span class="sd">        Args:</span>
<span class="sd">            organization_id (str): The ID of the organization that owns the data.</span>
<span class="sd">                You can obtain your organization ID from the Viam app&#39;s organization settings page.</span>
<span class="sd">            query (Union[List[bytes], List[Dict[str, Any]]]): &quot;The MQL query to run, as a list of MongoDB aggregation pipeline stages. </span>
<span class="sd">                Note: Each stage can be provided as either a dictionary or raw BSON bytes, but support for bytes will be removed in the future, </span>
<span class="sd">                so using a dictionary is preferred.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[Dict[str, Union[ValueTypes, datetime]]]: An array of decoded BSON data objects.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#tabulardatabymql&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">binary</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">bson</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">query</span><span class="p">)</span> <span class="k">for</span> <span class="n">query</span> <span class="ow">in</span> <span class="n">query</span><span class="p">]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">query</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span> <span class="k">else</span> <span class="n">query</span>  <span class="c1"># type: ignore</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TabularDataByMQLRequest</span><span class="p">(</span><span class="n">organization_id</span><span class="o">=</span><span class="n">organization_id</span><span class="p">,</span> <span class="n">mql_binary</span><span class="o">=</span><span class="n">binary</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">TabularDataByMQLResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">TabularDataByMQL</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">bson</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">bson_bytes</span><span class="p">)</span> <span class="k">for</span> <span class="n">bson_bytes</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">raw_data</span><span class="p">]</span></div>

<div class="viewcode-block" id="DataClient.get_latest_tabular_data"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.get_latest_tabular_data">[docs]</a>    <span class="nd">@_alias_param</span><span class="p">(</span><span class="s2">&quot;resource_api&quot;</span><span class="p">,</span> <span class="n">param_alias</span><span class="o">=</span><span class="s2">&quot;resource_subtype&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_latest_tabular_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">part_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">resource_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">resource_api</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">method_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueTypes</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the most recent tabular data captured from the specified data source, as long as it was synced within the last year.</span>

<span class="sd">        ::</span>

<span class="sd">            tabular_data = await data_client.get_latest_tabular_data(</span>
<span class="sd">                part_id=&quot;77ae3145-7b91-123a-a234-e567cdca8910&quot;,</span>
<span class="sd">                resource_name=&quot;camera-1&quot;,</span>
<span class="sd">                resource_api=&quot;rdk:component:camera&quot;,</span>
<span class="sd">                method_name=&quot;GetImage&quot;</span>
<span class="sd">            )</span>

<span class="sd">            if tabular_data:</span>
<span class="sd">                time_captured, time_synced, payload = tabular_data</span>
<span class="sd">                print(f&quot;Time Captured: {time_captured}&quot;)</span>
<span class="sd">                print(f&quot;Time Synced: {time_synced}&quot;)</span>
<span class="sd">                print(f&quot;Payload: {payload}&quot;)</span>
<span class="sd">            else:</span>
<span class="sd">                print(f&quot;No data returned: {tabular_data}&quot;)</span>

<span class="sd">        Args:</span>
<span class="sd">            part_id (str): The ID of the part that owns the data.</span>
<span class="sd">            resource_name (str): The name of the requested resource that captured the data. Ex: &quot;my-sensor&quot;.</span>
<span class="sd">            resource_api (str): The API of the requested resource that captured the data. Ex: &quot;rdk:component:sensor&quot;.</span>
<span class="sd">            method_name (str): The data capture method name. Ex: &quot;Readings&quot;.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[Tuple[datetime, datetime, Dict[str, ValueTypes]]]: A return value of None means that data hasn&#39;t been synced yet for the data source</span>
<span class="sd">            or the most recently captured data was over a year ago, otherwise the returned tuple contains the following:</span>
<span class="sd">            datetime: The time captured,</span>
<span class="sd">            datetime: The time synced,</span>
<span class="sd">            Dict[str, ValueTypes]: The latest tabular data captured from the specified data source.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#getlatesttabulardata&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">request</span> <span class="o">=</span> <span class="n">GetLatestTabularDataRequest</span><span class="p">(</span>
            <span class="n">part_id</span><span class="o">=</span><span class="n">part_id</span><span class="p">,</span> <span class="n">resource_name</span><span class="o">=</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">resource_subtype</span><span class="o">=</span><span class="n">resource_api</span><span class="p">,</span> <span class="n">method_name</span><span class="o">=</span><span class="n">method_name</span>
        <span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">GetLatestTabularDataResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">GetLatestTabularData</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">payload</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">time_captured</span><span class="o">.</span><span class="n">ToDatetime</span><span class="p">(),</span> <span class="n">response</span><span class="o">.</span><span class="n">time_synced</span><span class="o">.</span><span class="n">ToDatetime</span><span class="p">(),</span> <span class="n">struct_to_dict</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">payload</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataClient.export_tabular_data"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.export_tabular_data">[docs]</a>    <span class="nd">@_alias_param</span><span class="p">(</span><span class="s2">&quot;resource_api&quot;</span><span class="p">,</span> <span class="n">param_alias</span><span class="o">=</span><span class="s2">&quot;resource_subtype&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">export_tabular_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">part_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">resource_api</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">method_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">start_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">end_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TabularDataPoint</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Obtain unified tabular data and metadata from the specified data source.</span>

<span class="sd">        ::</span>

<span class="sd">            tabular_data = await data_client.export_tabular_data(</span>
<span class="sd">                part_id=&quot;&lt;PART-ID&gt;&quot;,</span>
<span class="sd">                resource_name=&quot;&lt;RESOURCE-NAME&gt;&quot;,</span>
<span class="sd">                resource_api=&quot;&lt;RESOURCE-API&gt;&quot;,</span>
<span class="sd">                method_name=&quot;&lt;METHOD-NAME&gt;&quot;,</span>
<span class="sd">                start_time=&quot;&lt;START_TIME&gt;&quot;</span>
<span class="sd">                end_time=&quot;&lt;END_TIME&gt;&quot;</span>
<span class="sd">            )</span>

<span class="sd">            print(f&quot;My data: {tabular_data}&quot;)</span>

<span class="sd">        Args:</span>
<span class="sd">            part_id (str): The ID of the part that owns the data.</span>
<span class="sd">            resource_name (str): The name of the requested resource that captured the data.</span>
<span class="sd">            resource_api (str): The API of the requested resource that captured the data.</span>
<span class="sd">            method_name (str): The data capture method name.</span>
<span class="sd">            start_time (datetime): Optional start time for requesting a specific range of data.</span>
<span class="sd">            end_time (datetime): Optional end time for requesting a specific range of data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[TabularDataPoint]: The unified tabular data and metadata.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#exporttabulardata&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">interval</span> <span class="o">=</span> <span class="n">CaptureInterval</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">datetime_to_timestamp</span><span class="p">(</span><span class="n">start_time</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="n">datetime_to_timestamp</span><span class="p">(</span><span class="n">end_time</span><span class="p">))</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">ExportTabularDataRequest</span><span class="p">(</span>
            <span class="n">part_id</span><span class="o">=</span><span class="n">part_id</span><span class="p">,</span> <span class="n">resource_name</span><span class="o">=</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">resource_subtype</span><span class="o">=</span><span class="n">resource_api</span><span class="p">,</span> <span class="n">method_name</span><span class="o">=</span><span class="n">method_name</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="n">interval</span>
        <span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ExportTabularDataResponse</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">ExportTabularData</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">[</span>
            <span class="n">DataClient</span><span class="o">.</span><span class="n">TabularDataPoint</span><span class="p">(</span>
                <span class="n">part_id</span><span class="o">=</span><span class="n">resp</span><span class="o">.</span><span class="n">part_id</span><span class="p">,</span>
                <span class="n">resource_name</span><span class="o">=</span><span class="n">resp</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span>
                <span class="n">resource_api</span><span class="o">=</span><span class="n">resp</span><span class="o">.</span><span class="n">resource_subtype</span><span class="p">,</span>
                <span class="n">method_name</span><span class="o">=</span><span class="n">resp</span><span class="o">.</span><span class="n">method_name</span><span class="p">,</span>
                <span class="n">time_captured</span><span class="o">=</span><span class="n">resp</span><span class="o">.</span><span class="n">time_captured</span><span class="o">.</span><span class="n">ToDatetime</span><span class="p">(),</span>
                <span class="n">organization_id</span><span class="o">=</span><span class="n">resp</span><span class="o">.</span><span class="n">organization_id</span><span class="p">,</span>
                <span class="n">location_id</span><span class="o">=</span><span class="n">resp</span><span class="o">.</span><span class="n">location_id</span><span class="p">,</span>
                <span class="n">robot_name</span><span class="o">=</span><span class="n">resp</span><span class="o">.</span><span class="n">robot_name</span><span class="p">,</span>
                <span class="n">robot_id</span><span class="o">=</span><span class="n">resp</span><span class="o">.</span><span class="n">robot_id</span><span class="p">,</span>
                <span class="n">part_name</span><span class="o">=</span><span class="n">resp</span><span class="o">.</span><span class="n">part_name</span><span class="p">,</span>
                <span class="n">method_parameters</span><span class="o">=</span><span class="n">struct_to_dict</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">method_parameters</span><span class="p">),</span>
                <span class="n">tags</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">tags</span><span class="p">),</span>
                <span class="n">payload</span><span class="o">=</span><span class="n">struct_to_dict</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">payload</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">resp</span> <span class="ow">in</span> <span class="n">response</span>
        <span class="p">]</span></div>

<div class="viewcode-block" id="DataClient.binary_data_by_filter"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.binary_data_by_filter">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">binary_data_by_filter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Filter</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">sort_order</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Order</span><span class="o">.</span><span class="n">ValueType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">last</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_binary_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">count_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_internal_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">BinaryData</span><span class="p">],</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Filter and download binary data. The data will be paginated into pages of `limit` items, and the pagination ID will be included</span>
<span class="sd">        in the returned tuple. If a destination is provided, the data will be saved to that file.</span>
<span class="sd">        If the file is not empty, it will be overwritten.</span>

<span class="sd">        ::</span>

<span class="sd">            from viam.utils import create_filter</span>
<span class="sd">            from viam.proto.app.data import Filter, TagsFilter, TagsFilterType</span>

<span class="sd">            # Get data captured from camera components</span>
<span class="sd">            my_data = []</span>
<span class="sd">            last = None</span>
<span class="sd">            my_filter = create_filter(component_name=&quot;camera-1&quot;)</span>

<span class="sd">            while True:</span>
<span class="sd">                data, count, last = await data_client.binary_data_by_filter(</span>
<span class="sd">                    my_filter, limit=1, last=last)</span>
<span class="sd">                if not data:</span>
<span class="sd">                    break</span>
<span class="sd">                my_data.extend(data)</span>

<span class="sd">            print(f&quot;My data: {my_data}&quot;)</span>

<span class="sd">            # Get untagged data from a dataset</span>

<span class="sd">            my_untagged_data = []</span>
<span class="sd">            last = None</span>
<span class="sd">            tags_filter = TagsFilter(type=TagsFilterType.TAGS_FILTER_TYPE_UNTAGGED)</span>
<span class="sd">            my_filter = Filter(</span>
<span class="sd">                dataset_id=&quot;66db6fe7d93d1ade24cd1dc3&quot;,</span>
<span class="sd">                tags_filter=tags_filter</span>
<span class="sd">            )</span>

<span class="sd">            while True:</span>
<span class="sd">                data, count, last = await data_client.binary_data_by_filter(</span>
<span class="sd">                    my_filter, last=last, include_binary_data=False)</span>
<span class="sd">                if not data:</span>
<span class="sd">                    break</span>
<span class="sd">                my_untagged_data.extend(data)</span>

<span class="sd">        Args:</span>
<span class="sd">            filter (viam.proto.app.data.Filter): Optional `Filter` specifying tabular data to retrieve. No `Filter` implies all binary</span>
<span class="sd">                data.</span>
<span class="sd">            limit (int): The maximum number of entries to include in a page. Defaults to 50 if unspecified.</span>
<span class="sd">            sort_order (viam.proto.app.data.Order): The desired sort order of the data.</span>
<span class="sd">            last (str): Optional string indicating the object identifier of the last-returned data.</span>
<span class="sd">                        This object identifier is returned by calls to `BinaryDataByFilter` as the `last` value.</span>
<span class="sd">                        If provided, the server will return the next data entries after the last object identifier.</span>
<span class="sd">            include_binary_data (bool): Boolean specifying whether to actually include the binary file data with each retrieved file.</span>
<span class="sd">                                        Defaults to true (that is, both the files&#39; data and metadata are returned).</span>
<span class="sd">            count_only (bool): Whether to return only the total count of entries.</span>
<span class="sd">            include_internal_data (bool): Whether to return the internal data. Internal data is used for Viam-specific data ingestion,</span>
<span class="sd">                                          like cloud SLAM. Defaults to `False`.</span>
<span class="sd">            dest (str): Optional filepath for writing retrieved data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple[List[viam.proto.app.data.BinaryData], int, str]: A tuple containing the following:</span>
<span class="sd">            List[viam.proto.app.data.BinaryData]: The binary data,</span>
<span class="sd">            int: The count (number of entries),</span>
<span class="sd">            str: The last-returned page ID.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#binarydatabyfilter&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">data_request</span> <span class="o">=</span> <span class="n">DataRequest</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">limit</span><span class="p">:</span>
            <span class="n">data_request</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="n">limit</span>
        <span class="k">if</span> <span class="n">sort_order</span><span class="p">:</span>
            <span class="n">data_request</span><span class="o">.</span><span class="n">sort_order</span> <span class="o">=</span> <span class="n">sort_order</span>
        <span class="k">if</span> <span class="n">last</span><span class="p">:</span>
            <span class="n">data_request</span><span class="o">.</span><span class="n">last</span> <span class="o">=</span> <span class="n">last</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">BinaryDataByFilterRequest</span><span class="p">(</span>
            <span class="n">data_request</span><span class="o">=</span><span class="n">data_request</span><span class="p">,</span>
            <span class="n">include_binary</span><span class="o">=</span><span class="n">include_binary_data</span><span class="p">,</span>
            <span class="n">count_only</span><span class="o">=</span><span class="n">count_only</span><span class="p">,</span>
            <span class="n">include_internal_data</span><span class="o">=</span><span class="n">include_internal_data</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">BinaryDataByFilterResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">BinaryDataByFilter</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dest</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">data</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">file</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to write binary data to file </span><span class="si">{</span><span class="n">dest</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">e</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">count</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">last</span></div>

<div class="viewcode-block" id="DataClient.binary_data_by_ids"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.binary_data_by_ids">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">binary_data_by_ids</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">binary_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BinaryID</span><span class="p">],</span>
        <span class="n">dest</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">BinaryData</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Filter and download binary data.</span>

<span class="sd">        ::</span>

<span class="sd">            from viam.proto.app.data import BinaryID</span>

<span class="sd">            binary_metadata, count, last = await data_client.binary_data_by_filter(</span>
<span class="sd">                include_binary_data=False</span>
<span class="sd">            )</span>

<span class="sd">            my_ids = []</span>

<span class="sd">            for obj in binary_metadata:</span>
<span class="sd">                my_ids.append(</span>
<span class="sd">                    BinaryID(</span>
<span class="sd">                        file_id=obj.metadata.id,</span>
<span class="sd">                        organization_id=obj.metadata.capture_metadata.organization_id,</span>
<span class="sd">                        location_id=obj.metadata.capture_metadata.location_id</span>
<span class="sd">                    )</span>
<span class="sd">                )</span>

<span class="sd">            binary_data = await data_client.binary_data_by_ids(my_ids)</span>

<span class="sd">        Args:</span>
<span class="sd">            binary_ids (List[viam.proto.app.data.BinaryID]): `BinaryID` objects specifying the desired data. Must be non-empty.</span>
<span class="sd">            dest (str): Optional filepath for writing retrieved data.</span>

<span class="sd">        Raises:</span>
<span class="sd">            GRPCError: If no `BinaryID` objects are provided.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[viam.proto.app.data.BinaryData]: The binary data.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#binarydatabyids&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">BinaryDataByIDsRequest</span><span class="p">(</span><span class="n">binary_ids</span><span class="o">=</span><span class="n">binary_ids</span><span class="p">,</span> <span class="n">include_binary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">BinaryDataByIDsResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">BinaryDataByIDs</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dest</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">file</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to write binary data to file </span><span class="si">{</span><span class="n">dest</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataClient.delete_tabular_data"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.delete_tabular_data">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_tabular_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">organization_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">delete_older_than_days</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete tabular data older than a specified number of days.</span>

<span class="sd">        ::</span>

<span class="sd">            tabular_data = await data_client.delete_tabular_data(</span>
<span class="sd">                organization_id=&quot;&lt;YOUR-ORG-ID&gt;&quot;,</span>
<span class="sd">                delete_older_than_days=150</span>
<span class="sd">            )</span>

<span class="sd">        Args:</span>
<span class="sd">            organization_id (str): ID of organization to delete data from.</span>
<span class="sd">                You can obtain your organization ID from the Viam app&#39;s organization settings page.</span>
<span class="sd">            delete_older_than_days (int): Delete data that was captured up to this many days ago. For example if `delete_older_than_days`</span>
<span class="sd">                is 10, this deletes any data that was captured up to 10 days ago. If it is 0, all existing data is deleted.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The number of items deleted.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#deletetabulardata&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">DeleteTabularDataRequest</span><span class="p">(</span><span class="n">organization_id</span><span class="o">=</span><span class="n">organization_id</span><span class="p">,</span> <span class="n">delete_older_than_days</span><span class="o">=</span><span class="n">delete_older_than_days</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">DeleteTabularDataResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">DeleteTabularData</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">deleted_count</span></div>

<div class="viewcode-block" id="DataClient.delete_tabular_data_by_filter"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.delete_tabular_data_by_filter">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_tabular_data_by_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Filter</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprecated: use delete_tabular_data instead.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></div>

<div class="viewcode-block" id="DataClient.delete_binary_data_by_filter"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.delete_binary_data_by_filter">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_binary_data_by_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Filter</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Filter and delete binary data.</span>

<span class="sd">        ::</span>

<span class="sd">            from viam.utils import create_filter</span>

<span class="sd">            my_filter = create_filter(component_name=&quot;left_motor&quot;, organization_ids=[&quot;&lt;YOUR-ORG-ID&gt;&quot;])</span>

<span class="sd">            res = await data_client.delete_binary_data_by_filter(my_filter)</span>

<span class="sd">        Args:</span>
<span class="sd">            filter (viam.proto.app.data.Filter): Optional `Filter` specifying binary data to delete. Passing an empty `Filter` will lead to</span>
<span class="sd">                all data being deleted. Exercise caution when using this option. You must specify an organization ID with</span>
<span class="sd">                &quot;organization_ids&quot; when using this option.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The number of items deleted.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#deletebinarydatabyfilter&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">filter</span> <span class="o">=</span> <span class="nb">filter</span> <span class="k">if</span> <span class="nb">filter</span> <span class="k">else</span> <span class="n">Filter</span><span class="p">()</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">DeleteBinaryDataByFilterRequest</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">DeleteBinaryDataByFilterResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">DeleteBinaryDataByFilter</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">deleted_count</span></div>

<div class="viewcode-block" id="DataClient.delete_binary_data_by_ids"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.delete_binary_data_by_ids">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_binary_data_by_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">binary_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BinaryID</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Filter and delete binary data.</span>

<span class="sd">        ::</span>

<span class="sd">            from viam.proto.app.data import BinaryID</span>
<span class="sd">            from viam.utils import create_filter</span>

<span class="sd">            my_filter = create_filter(component_name=&quot;camera-1&quot;, organization_ids=[&quot;&lt;YOUR-ORG-ID&gt;&quot;])</span>
<span class="sd">            binary_metadata, count, last = await data_client.binary_data_by_filter(</span>
<span class="sd">                filter=my_filter,</span>
<span class="sd">                limit=20,</span>
<span class="sd">                include_binary_data=False</span>
<span class="sd">            )</span>

<span class="sd">            my_ids = []</span>

<span class="sd">            for obj in binary_metadata:</span>
<span class="sd">                my_ids.append(</span>
<span class="sd">                    BinaryID(</span>
<span class="sd">                        file_id=obj.metadata.id,</span>
<span class="sd">                        organization_id=obj.metadata.capture_metadata.organization_id,</span>
<span class="sd">                        location_id=obj.metadata.capture_metadata.location_id</span>
<span class="sd">                    )</span>
<span class="sd">                )</span>

<span class="sd">            binary_data = await data_client.delete_binary_data_by_ids(my_ids)</span>

<span class="sd">        Args:</span>
<span class="sd">            binary_ids (List[viam.proto.app.data.BinaryID]): `BinaryID` objects specifying the data to be deleted. Must be non-empty.</span>

<span class="sd">        Raises:</span>
<span class="sd">            GRPCError: If no `BinaryID` objects are provided.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The number of items deleted.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#deletebinarydatabyids&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">DeleteBinaryDataByIDsRequest</span><span class="p">(</span><span class="n">binary_ids</span><span class="o">=</span><span class="n">binary_ids</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">DeleteBinaryDataByIDsResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">DeleteBinaryDataByIDs</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">deleted_count</span></div>

<div class="viewcode-block" id="DataClient.add_tags_to_binary_data_by_ids"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.add_tags_to_binary_data_by_ids">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_tags_to_binary_data_by_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tags</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">binary_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BinaryID</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add tags to binary data.</span>

<span class="sd">        ::</span>

<span class="sd">            from viam.proto.app.data import BinaryID</span>
<span class="sd">            from viam.utils import create_filter</span>

<span class="sd">            tags = [&quot;tag1&quot;, &quot;tag2&quot;]</span>

<span class="sd">            my_filter = create_filter(component_name=&quot;camera-1&quot;, organization_ids=[&quot;&lt;YOUR-ORG-ID&gt;&quot;])</span>
<span class="sd">            binary_metadata, count, last = await data_client.binary_data_by_filter(</span>
<span class="sd">                filter=my_filter,</span>
<span class="sd">                limit=20,</span>
<span class="sd">                include_binary_data=False</span>
<span class="sd">            )</span>

<span class="sd">            my_ids = []</span>

<span class="sd">            for obj in binary_metadata:</span>
<span class="sd">                my_ids.append(</span>
<span class="sd">                    BinaryID(</span>
<span class="sd">                        file_id=obj.metadata.id,</span>
<span class="sd">                        organization_id=obj.metadata.capture_metadata.organization_id,</span>
<span class="sd">                        location_id=obj.metadata.capture_metadata.location_id</span>
<span class="sd">                    )</span>
<span class="sd">                )</span>

<span class="sd">            binary_data = await data_client.add_tags_to_binary_data_by_ids(tags, my_ids)</span>

<span class="sd">        Args:</span>
<span class="sd">            tags (List[str]): List of tags to add to specified binary data. Must be non-empty.</span>
<span class="sd">            binary_ids (List[viam.app.proto.BinaryID]): List of `BinaryID` objects specifying binary data to tag. Must be non-empty.</span>

<span class="sd">        Raises:</span>
<span class="sd">            GRPCError: If no `BinaryID` objects or tags are provided.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#addtagstobinarydatabyids&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">AddTagsToBinaryDataByIDsRequest</span><span class="p">(</span><span class="n">binary_ids</span><span class="o">=</span><span class="n">binary_ids</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">AddTagsToBinaryDataByIDs</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataClient.add_tags_to_binary_data_by_filter"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.add_tags_to_binary_data_by_filter">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_tags_to_binary_data_by_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tags</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Filter</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add tags to binary data.</span>

<span class="sd">        ::</span>

<span class="sd">            from viam.utils import create_filter</span>

<span class="sd">            my_filter = create_filter(component_name=&quot;my_camera&quot;)</span>
<span class="sd">            tags = [&quot;tag1&quot;, &quot;tag2&quot;]</span>
<span class="sd">            await data_client.add_tags_to_binary_data_by_filter(tags, my_filter)</span>

<span class="sd">        Args:</span>
<span class="sd">            tags (List[str]): List of tags to add to specified binary data. Must be non-empty.</span>
<span class="sd">            filter (viam.proto.app.data.Filter): `Filter` specifying binary data to tag. If no `Filter` is provided, all data will be</span>
<span class="sd">                tagged.</span>

<span class="sd">        Raises:</span>
<span class="sd">            GRPCError: If no tags are provided.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#addtagstobinarydatabyfilter&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">filter</span> <span class="o">=</span> <span class="nb">filter</span> <span class="k">if</span> <span class="nb">filter</span> <span class="k">else</span> <span class="n">Filter</span><span class="p">()</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">AddTagsToBinaryDataByFilterRequest</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">AddTagsToBinaryDataByFilter</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataClient.remove_tags_from_binary_data_by_ids"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.remove_tags_from_binary_data_by_ids">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">remove_tags_from_binary_data_by_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tags</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">binary_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BinaryID</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove tags from binary data by IDs.</span>

<span class="sd">        ::</span>

<span class="sd">            from viam.proto.app.data import BinaryID</span>
<span class="sd">            from viam.utils import create_filter</span>

<span class="sd">            tags = [&quot;tag1&quot;, &quot;tag2&quot;]</span>

<span class="sd">            my_filter = create_filter(component_name=&quot;camera-1&quot;)</span>

<span class="sd">            binary_metadata, count, last = await data_client.binary_data_by_filter(</span>
<span class="sd">                filter=my_filter,</span>
<span class="sd">                limit=50,</span>
<span class="sd">                include_binary_data=False</span>
<span class="sd">            )</span>

<span class="sd">            my_ids = []</span>

<span class="sd">            for obj in binary_metadata:</span>
<span class="sd">                my_ids.append(</span>
<span class="sd">                    BinaryID(</span>
<span class="sd">                        file_id=obj.metadata.id,</span>
<span class="sd">                        organization_id=obj.metadata.capture_metadata.organization_id,</span>
<span class="sd">                        location_id=obj.metadata.capture_metadata.location_id</span>
<span class="sd">                    )</span>
<span class="sd">                )</span>

<span class="sd">            binary_data = await data_client.remove_tags_from_binary_data_by_ids(</span>
<span class="sd">                tags, my_ids)</span>

<span class="sd">        Args:</span>
<span class="sd">            tags (List[str]): List of tags to remove from specified binary data. Must be non-empty.</span>
<span class="sd">            binary_ids (List[BinaryID]): List of `BinaryID` objects specifying binary data to untag. Must be non-empty.</span>

<span class="sd">        Raises:</span>
<span class="sd">            GRPCError: If no binary_ids or tags are provided.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The number of tags removed.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#removetagsfrombinarydatabyids&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">RemoveTagsFromBinaryDataByIDsRequest</span><span class="p">(</span><span class="n">binary_ids</span><span class="o">=</span><span class="n">binary_ids</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">RemoveTagsFromBinaryDataByIDsResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">RemoveTagsFromBinaryDataByIDs</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">deleted_count</span></div>

<div class="viewcode-block" id="DataClient.remove_tags_from_binary_data_by_filter"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.remove_tags_from_binary_data_by_filter">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">remove_tags_from_binary_data_by_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tags</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Filter</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove tags from binary data.</span>

<span class="sd">        ::</span>

<span class="sd">            from viam.utils import create_filter</span>

<span class="sd">            my_filter = create_filter(component_name=&quot;my_camera&quot;)</span>
<span class="sd">            tags = [&quot;tag1&quot;, &quot;tag2&quot;]</span>
<span class="sd">            res = await data_client.remove_tags_from_binary_data_by_filter(tags, my_filter)</span>

<span class="sd">        Args:</span>
<span class="sd">            tags (List[str]): List of tags to remove from specified binary data.</span>
<span class="sd">            filter (viam.proto.app.data.Filter): `Filter` specifying binary data to untag. If no `Filter` is provided, all data will be</span>
<span class="sd">                untagged.</span>

<span class="sd">        Raises:</span>
<span class="sd">            GRPCError: If no tags are provided.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The number of tags removed.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#removetagsfrombinarydatabyfilter&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">filter</span> <span class="o">=</span> <span class="nb">filter</span> <span class="k">if</span> <span class="nb">filter</span> <span class="k">else</span> <span class="n">Filter</span><span class="p">()</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">RemoveTagsFromBinaryDataByFilterRequest</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">RemoveTagsFromBinaryDataByFilterResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">RemoveTagsFromBinaryDataByFilter</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">deleted_count</span></div>

<div class="viewcode-block" id="DataClient.tags_by_filter"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.tags_by_filter">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">tags_by_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Filter</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of tags using a filter.</span>

<span class="sd">        ::</span>

<span class="sd">            from viam.utils import create_filter</span>

<span class="sd">            my_filter = create_filter(component_name=&quot;my_camera&quot;)</span>
<span class="sd">            tags = await data_client.tags_by_filter(my_filter)</span>

<span class="sd">        Args:</span>
<span class="sd">            filter (viam.proto.app.data.Filter): `Filter` specifying data to retrieve from. If no `Filter` is provided, all data tags will</span>
<span class="sd">                return.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[str]: The list of tags.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#tagsbyfilter&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">filter</span> <span class="o">=</span> <span class="nb">filter</span> <span class="k">if</span> <span class="nb">filter</span> <span class="k">else</span> <span class="n">Filter</span><span class="p">()</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TagsByFilterRequest</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">TagsByFilterResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">TagsByFilter</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">tags</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataClient.add_bounding_box_to_image_by_id"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.add_bounding_box_to_image_by_id">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_bounding_box_to_image_by_id</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">binary_id</span><span class="p">:</span> <span class="n">BinaryID</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">x_min_normalized</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">y_min_normalized</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">x_max_normalized</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">y_max_normalized</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a bounding box to an image.</span>

<span class="sd">        ::</span>

<span class="sd">            from viam.proto.app.data import BinaryID</span>

<span class="sd">            MY_BINARY_ID = BinaryID(</span>
<span class="sd">                file_id=&quot;&lt;YOUR-FILE-ID&gt;&quot;,</span>
<span class="sd">                organization_id=&quot;&lt;YOUR-ORG-ID&gt;&quot;,</span>
<span class="sd">                location_id=&quot;&lt;YOUR-LOCATION-ID&gt;&quot;</span>
<span class="sd">            )</span>

<span class="sd">            bbox_id = await data_client.add_bounding_box_to_image_by_id(</span>
<span class="sd">                binary_id=MY_BINARY_ID,</span>
<span class="sd">                label=&quot;label&quot;,</span>
<span class="sd">                x_min_normalized=0,</span>
<span class="sd">                y_min_normalized=.1,</span>
<span class="sd">                x_max_normalized=.2,</span>
<span class="sd">                y_max_normalized=.3</span>
<span class="sd">            )</span>

<span class="sd">            print(bbox_id)</span>

<span class="sd">        Args:</span>
<span class="sd">            binary_id (viam.proto.app.data.BinaryID): The ID of the image to add the bounding box to.</span>
<span class="sd">            label (str): A label for the bounding box.</span>
<span class="sd">            x_min_normalized (float): Min X value of the bounding box normalized from 0 to 1.</span>
<span class="sd">            y_min_normalized (float): Min Y value of the bounding box normalized from 0 to 1.</span>
<span class="sd">            x_max_normalized (float): Max X value of the bounding box normalized from 0 to 1.</span>
<span class="sd">            y_max_normalized (float): Max Y value of the bounding box normalized from 0 to 1.</span>

<span class="sd">        Raises:</span>
<span class="sd">            GRPCError: If the X or Y values are outside of the [0, 1] range.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The bounding box ID.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#addboundingboxtoimagebyid&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">AddBoundingBoxToImageByIDRequest</span><span class="p">(</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">binary_id</span><span class="o">=</span><span class="n">binary_id</span><span class="p">,</span>
            <span class="n">x_max_normalized</span><span class="o">=</span><span class="n">x_max_normalized</span><span class="p">,</span>
            <span class="n">x_min_normalized</span><span class="o">=</span><span class="n">x_min_normalized</span><span class="p">,</span>
            <span class="n">y_max_normalized</span><span class="o">=</span><span class="n">y_max_normalized</span><span class="p">,</span>
            <span class="n">y_min_normalized</span><span class="o">=</span><span class="n">y_min_normalized</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">AddBoundingBoxToImageByIDResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">AddBoundingBoxToImageByID</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">bbox_id</span></div>

<div class="viewcode-block" id="DataClient.remove_bounding_box_from_image_by_id"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.remove_bounding_box_from_image_by_id">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">remove_bounding_box_from_image_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bbox_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">binary_id</span><span class="p">:</span> <span class="n">BinaryID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes a bounding box from an image.</span>

<span class="sd">        ::</span>

<span class="sd">            from viam.proto.app.data import BinaryID</span>

<span class="sd">            MY_BINARY_ID = BinaryID(</span>
<span class="sd">                file_id=your-file_id,</span>
<span class="sd">                organization_id=your-org-id,</span>
<span class="sd">                location_id=your-location-id</span>
<span class="sd">            )</span>

<span class="sd">            await data_client.remove_bounding_box_from_image_by_id(</span>
<span class="sd">            binary_id=MY_BINARY_ID,</span>
<span class="sd">            bbox_id=&quot;your-bounding-box-id-to-delete&quot;</span>
<span class="sd">            )</span>

<span class="sd">        Args:</span>
<span class="sd">            bbox_id (str): The ID of the bounding box to remove.</span>
<span class="sd">            binary_id (viam.proto.arr.data.BinaryID): Binary ID of the image to remove the bounding box from.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#removeboundingboxfromimagebyid&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">RemoveBoundingBoxFromImageByIDRequest</span><span class="p">(</span><span class="n">bbox_id</span><span class="o">=</span><span class="n">bbox_id</span><span class="p">,</span> <span class="n">binary_id</span><span class="o">=</span><span class="n">binary_id</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">RemoveBoundingBoxFromImageByID</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataClient.bounding_box_labels_by_filter"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.bounding_box_labels_by_filter">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">bounding_box_labels_by_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Filter</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of bounding box labels using a `Filter`.</span>

<span class="sd">        ::</span>

<span class="sd">            from viam.utils import create_filter</span>

<span class="sd">            my_filter = create_filter(component_name=&quot;my_camera&quot;)</span>
<span class="sd">            bounding_box_labels = await data_client.bounding_box_labels_by_filter(</span>
<span class="sd">                my_filter)</span>

<span class="sd">            print(bounding_box_labels)</span>

<span class="sd">        Args:</span>
<span class="sd">            filter (viam.proto.app.data.Filter): `Filter` specifying data to retrieve from. If no `Filter` is provided, all labels will</span>
<span class="sd">                return.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[str]: The list of bounding box labels.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#boundingboxlabelsbyfilter&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">filter</span> <span class="o">=</span> <span class="nb">filter</span> <span class="k">if</span> <span class="nb">filter</span> <span class="k">else</span> <span class="n">Filter</span><span class="p">()</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">BoundingBoxLabelsByFilterRequest</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">BoundingBoxLabelsByFilterResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">BoundingBoxLabelsByFilter</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">labels</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataClient.get_database_connection"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.get_database_connection">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_database_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">organization_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a connection to access a MongoDB Atlas Data federation instance.</span>

<span class="sd">        ::</span>

<span class="sd">            hostname = await data_client.get_database_connection(organization_id=&quot;&lt;YOUR-ORG-ID&gt;&quot;)</span>

<span class="sd">        Args:</span>
<span class="sd">            organization_id (str): Organization to retrieve the connection for.</span>
<span class="sd">                You can obtain your organization ID from the Viam app&#39;s organization settings page.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The hostname of the federated database.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#getdatabaseconnection&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">GetDatabaseConnectionRequest</span><span class="p">(</span><span class="n">organization_id</span><span class="o">=</span><span class="n">organization_id</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">GetDatabaseConnectionResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">GetDatabaseConnection</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">hostname</span></div>

<div class="viewcode-block" id="DataClient.configure_database_user"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.configure_database_user">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">configure_database_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">organization_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configure a database user for the Viam organization&#39;s MongoDB Atlas Data Federation instance. It can also be used to reset the</span>
<span class="sd">        password of the existing database user.</span>

<span class="sd">        ::</span>

<span class="sd">            await data_client.configure_database_user(</span>
<span class="sd">                organization_id=&quot;&lt;YOUR-ORG-ID&gt;&quot;,</span>
<span class="sd">                password=&quot;Your_Password@1234&quot;</span>
<span class="sd">            )</span>

<span class="sd">        Args:</span>
<span class="sd">            organization_id (str): The ID of the organization.</span>
<span class="sd">                You can obtain your organization ID from the Viam app&#39;s organization settings page.</span>
<span class="sd">            password (str): The password of the user.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#configuredatabaseuser&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">ConfigureDatabaseUserRequest</span><span class="p">(</span><span class="n">organization_id</span><span class="o">=</span><span class="n">organization_id</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">ConfigureDatabaseUser</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataClient.create_dataset"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.create_dataset">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">organization_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new dataset.</span>

<span class="sd">        ::</span>

<span class="sd">            dataset_id = await data_client.create_dataset(</span>
<span class="sd">                name=&quot;&lt;DATASET-NAME&gt;&quot;,</span>
<span class="sd">                organization_id=&quot;&lt;YOUR-ORG-ID&gt;&quot;</span>
<span class="sd">            )</span>
<span class="sd">            print(dataset_id)</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the dataset being created.</span>
<span class="sd">            organization_id (str): The ID of the organization where the dataset is being created.</span>
<span class="sd">                You can obtain your organization ID from the Viam app&#39;s organization settings page.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The dataset ID of the created dataset.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#createdataset&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">CreateDatasetRequest</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">organization_id</span><span class="o">=</span><span class="n">organization_id</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">CreateDatasetResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_client</span><span class="o">.</span><span class="n">CreateDataset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">id</span></div>

<div class="viewcode-block" id="DataClient.list_dataset_by_ids"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.list_dataset_by_ids">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">list_dataset_by_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Dataset</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of datasets using their IDs.</span>

<span class="sd">        ::</span>

<span class="sd">            datasets = await data_client.list_dataset_by_ids(</span>
<span class="sd">                ids=[&quot;&lt;YOUR-DATASET-ID-1&gt;, &lt;YOUR-DATASET-ID-2&gt;&quot;]</span>
<span class="sd">            )</span>
<span class="sd">            print(datasets)</span>

<span class="sd">        Args:</span>
<span class="sd">            ids (List[str]): The IDs of the datasets being called for. To retrieve these IDs,</span>
<span class="sd">                navigate to your dataset&#39;s page in the Viam app,</span>
<span class="sd">                click **...** in the left-hand menu, and click **Copy dataset ID**.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Sequence[Dataset]: The list of datasets.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#listdatasetsbyids&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">ListDatasetsByIDsRequest</span><span class="p">(</span><span class="n">ids</span><span class="o">=</span><span class="n">ids</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">ListDatasetsByIDsResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_client</span><span class="o">.</span><span class="n">ListDatasetsByIDs</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">datasets</span></div>

<div class="viewcode-block" id="DataClient.list_datasets_by_organization_id"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.list_datasets_by_organization_id">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">list_datasets_by_organization_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">organization_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Dataset</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the datasets in an organization.</span>

<span class="sd">        ::</span>

<span class="sd">            datasets = await data_client.list_datasets_by_organization_id(</span>
<span class="sd">                organization_id=&quot;&lt;YOUR-ORG-ID&gt;&quot;</span>
<span class="sd">            )</span>
<span class="sd">            print(datasets)</span>

<span class="sd">        Args:</span>
<span class="sd">            organization_id (str): The ID of the organization.</span>
<span class="sd">                You can obtain your organization ID from the Viam app&#39;s organization settings page.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Sequence[Dataset]: The list of datasets in the organization.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#listdatasetsbyorganizationid&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">ListDatasetsByOrganizationIDRequest</span><span class="p">(</span><span class="n">organization_id</span><span class="o">=</span><span class="n">organization_id</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">ListDatasetsByOrganizationIDResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_client</span><span class="o">.</span><span class="n">ListDatasetsByOrganizationID</span><span class="p">(</span>
            <span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">datasets</span></div>

<div class="viewcode-block" id="DataClient.rename_dataset"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.rename_dataset">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">rename_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Rename a dataset specified by the dataset ID.</span>

<span class="sd">        ::</span>

<span class="sd">            await data_client.rename_dataset(</span>
<span class="sd">                id=&quot;&lt;YOUR-DATASET-ID&gt;&quot;,</span>
<span class="sd">                name=&quot;MyDataset&quot;</span>
<span class="sd">            )</span>

<span class="sd">        Args:</span>
<span class="sd">            id (str): The ID of the dataset. You can retrieve this by navigating to the **DATASETS** sub-tab of the **DATA** tab,</span>
<span class="sd">                clicking on the dataset, clicking the **...** menu and selecting **Copy dataset ID**.</span>
<span class="sd">            name (str): The new name of the dataset.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#renamedataset&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">RenameDatasetRequest</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_client</span><span class="o">.</span><span class="n">RenameDataset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataClient.delete_dataset"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.delete_dataset">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a dataset.</span>

<span class="sd">        ::</span>

<span class="sd">            await data_client.delete_dataset(</span>
<span class="sd">                id=&quot;&lt;YOUR-DATASET-ID&gt;&quot;</span>
<span class="sd">            )</span>

<span class="sd">        Args:</span>
<span class="sd">            id (str): The ID of the dataset. You can retrieve this by navigating to the **DATASETS** sub-tab of the **DATA** tab,</span>
<span class="sd">                clicking on the dataset, clicking the **...** menu and selecting **Copy dataset ID**.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#deletedataset&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">DeleteDatasetRequest</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_client</span><span class="o">.</span><span class="n">DeleteDataset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataClient.add_binary_data_to_dataset_by_ids"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.add_binary_data_to_dataset_by_ids">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_binary_data_to_dataset_by_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">binary_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BinaryID</span><span class="p">],</span> <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add the BinaryData to the provided dataset.</span>

<span class="sd">        This BinaryData will be tagged with the VIAM_DATASET_{id} label.</span>

<span class="sd">        ::</span>

<span class="sd">            from viam.proto.app.data import BinaryID</span>

<span class="sd">            binary_metadata, count, last = await data_client.binary_data_by_filter(</span>
<span class="sd">                include_binary_data=False</span>
<span class="sd">            )</span>

<span class="sd">            my_binary_ids = []</span>

<span class="sd">            for obj in binary_metadata:</span>
<span class="sd">                my_binary_ids.append(</span>
<span class="sd">                    BinaryID(</span>
<span class="sd">                        file_id=obj.metadata.id,</span>
<span class="sd">                        organization_id=obj.metadata.capture_metadata.organization_id,</span>
<span class="sd">                        location_id=obj.metadata.capture_metadata.location_id</span>
<span class="sd">                        )</span>
<span class="sd">                    )</span>

<span class="sd">            await data_client.add_binary_data_to_dataset_by_ids(</span>
<span class="sd">                binary_ids=my_binary_ids,</span>
<span class="sd">                dataset_id=&quot;abcd-1234xyz-8765z-123abc&quot;</span>
<span class="sd">            )</span>

<span class="sd">        Args:</span>
<span class="sd">            binary_ids (List[BinaryID]): The IDs of binary data to add to dataset. To retrieve these IDs,</span>
<span class="sd">                navigate to your dataset&#39;s page in the Viam app,</span>
<span class="sd">                click **...** in the left-hand menu, and click **Copy dataset ID**.</span>
<span class="sd">            dataset_id (str): The ID of the dataset to be added to.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#addbinarydatatodatasetbyids&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">AddBinaryDataToDatasetByIDsRequest</span><span class="p">(</span><span class="n">binary_ids</span><span class="o">=</span><span class="n">binary_ids</span><span class="p">,</span> <span class="n">dataset_id</span><span class="o">=</span><span class="n">dataset_id</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">AddBinaryDataToDatasetByIDs</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataClient.remove_binary_data_from_dataset_by_ids"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.remove_binary_data_from_dataset_by_ids">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">remove_binary_data_from_dataset_by_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">binary_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BinaryID</span><span class="p">],</span> <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove the BinaryData from the provided dataset.</span>

<span class="sd">        This BinaryData will lose the VIAM_DATASET_{id} tag.</span>

<span class="sd">        ::</span>

<span class="sd">            from viam.proto.app.data import BinaryID</span>

<span class="sd">            binary_metadata, count, last = await data_client.binary_data_by_filter(</span>
<span class="sd">                include_binary_data=False</span>
<span class="sd">            )</span>

<span class="sd">            my_binary_ids = []</span>

<span class="sd">            for obj in binary_metadata:</span>
<span class="sd">                my_binary_ids.append(</span>
<span class="sd">                    BinaryID(</span>
<span class="sd">                        file_id=obj.metadata.id,</span>
<span class="sd">                        organization_id=obj.metadata.capture_metadata.organization_id,</span>
<span class="sd">                        location_id=obj.metadata.capture_metadata.location_id</span>
<span class="sd">                    )</span>
<span class="sd">                )</span>

<span class="sd">            await data_client.remove_binary_data_from_dataset_by_ids(</span>
<span class="sd">                binary_ids=my_binary_ids,</span>
<span class="sd">                dataset_id=&quot;abcd-1234xyz-8765z-123abc&quot;</span>
<span class="sd">            )</span>

<span class="sd">        Args:</span>
<span class="sd">            binary_ids (List[BinaryID]): The IDs of binary data to remove from dataset. To retrieve these IDs,</span>
<span class="sd">                navigate to your dataset&#39;s page in the Viam app,</span>
<span class="sd">                click **...** in the left-hand menu, and click **Copy dataset ID**.</span>
<span class="sd">            dataset_id (str): The ID of the dataset to be removed from.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#removebinarydatafromdatasetbyids&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">RemoveBinaryDataFromDatasetByIDsRequest</span><span class="p">(</span><span class="n">binary_ids</span><span class="o">=</span><span class="n">binary_ids</span><span class="p">,</span> <span class="n">dataset_id</span><span class="o">=</span><span class="n">dataset_id</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_client</span><span class="o">.</span><span class="n">RemoveBinaryDataFromDatasetByIDs</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataClient.binary_data_capture_upload"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.binary_data_capture_upload">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">binary_data_capture_upload</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">binary_data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">part_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">component_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">component_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">method_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">file_extension</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">method_parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">data_request_times</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="n">datetime</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Upload binary sensor data.</span>

<span class="sd">        Upload binary data collected on a robot through a specific component (for example, a motor) along with the relevant metadata to</span>
<span class="sd">        app.viam.com. Binary data can be found under the &quot;Files&quot; subtab of the Data tab on app.viam.com.</span>

<span class="sd">        ::</span>

<span class="sd">            time_requested = datetime(2023, 6, 5, 11)</span>
<span class="sd">            time_received = datetime(2023, 6, 5, 11, 0, 3)</span>

<span class="sd">            file_id = await data_client.binary_data_capture_upload(</span>
<span class="sd">                part_id=&quot;INSERT YOUR PART ID&quot;,</span>
<span class="sd">                component_type=&#39;camera&#39;,</span>
<span class="sd">                component_name=&#39;my_camera&#39;,</span>
<span class="sd">                method_name=&#39;GetImages&#39;,</span>
<span class="sd">                method_parameters=None,</span>
<span class="sd">                tags=[&quot;tag_1&quot;, &quot;tag_2&quot;],</span>
<span class="sd">                data_request_times=[time_requested, time_received],</span>
<span class="sd">                file_extension=&quot;.jpg&quot;,</span>
<span class="sd">                binary_data=b&quot;Encoded image bytes&quot;</span>
<span class="sd">            )</span>

<span class="sd">        Args:</span>
<span class="sd">            binary_data (bytes): The data to be uploaded, represented in bytes.</span>
<span class="sd">            part_id (str): Part ID of the component used to capture the data.</span>
<span class="sd">            component_type (str): Type of the component used to capture the data (for example, &quot;movement_sensor&quot;).</span>
<span class="sd">            component_name (str): Name of the component used to capture the data.</span>
<span class="sd">            method_name (str): Name of the method used to capture the data.</span>
<span class="sd">            file_extension (str): The file extension of binary data including the period, for example .jpg, .png, .pcd.</span>
<span class="sd">                The backend will route the binary to its corresponding mime type based on this extension. Files with a .jpeg, .jpg,</span>
<span class="sd">                or .png extension will be saved to the images tab.</span>
<span class="sd">            method_parameters (Optional[Mapping[str, Any]]): Optional dictionary of method parameters. No longer in active use.</span>
<span class="sd">            tags (Optional[List[str]]): Optional list of tags to allow for tag-based data filtering when retrieving data.</span>
<span class="sd">            data_request_times (Optional[Tuple[datetime.datetime, datetime.datetime]]): Optional tuple containing datetime objects</span>
<span class="sd">                denoting the times this data was requested[0] by the robot and received[1] from the appropriate sensor.</span>

<span class="sd">        Raises:</span>
<span class="sd">            GRPCError: If an invalid part ID is passed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The file_id of the uploaded data.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#binarydatacaptureupload&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sensor_contents</span> <span class="o">=</span> <span class="n">SensorData</span><span class="p">(</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">(</span>
                <span class="n">SensorMetadata</span><span class="p">(</span>
                    <span class="n">time_requested</span><span class="o">=</span><span class="n">datetime_to_timestamp</span><span class="p">(</span><span class="n">data_request_times</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="n">data_request_times</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="n">time_received</span><span class="o">=</span><span class="n">datetime_to_timestamp</span><span class="p">(</span><span class="n">data_request_times</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">if</span> <span class="n">data_request_times</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">data_request_times</span>
                <span class="k">else</span> <span class="kc">None</span>
            <span class="p">),</span>
            <span class="n">struct</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># Used for tabular data.</span>
            <span class="n">binary</span><span class="o">=</span><span class="n">binary_data</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">UploadMetadata</span><span class="p">(</span>
            <span class="n">part_id</span><span class="o">=</span><span class="n">part_id</span><span class="p">,</span>
            <span class="n">component_type</span><span class="o">=</span><span class="n">component_type</span><span class="p">,</span>
            <span class="n">component_name</span><span class="o">=</span><span class="n">component_name</span><span class="p">,</span>
            <span class="n">method_name</span><span class="o">=</span><span class="n">method_name</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">DataType</span><span class="o">.</span><span class="n">DATA_TYPE_BINARY_SENSOR</span><span class="p">,</span>
            <span class="n">method_parameters</span><span class="o">=</span><span class="n">method_parameters</span><span class="p">,</span>
            <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">file_extension</span><span class="p">:</span>
            <span class="n">metadata</span><span class="o">.</span><span class="n">file_extension</span> <span class="o">=</span> <span class="n">file_extension</span> <span class="k">if</span> <span class="n">file_extension</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;.&quot;</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="n">file_extension</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_capture_upload</span><span class="p">(</span><span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">sensor_contents</span><span class="o">=</span><span class="p">[</span><span class="n">sensor_contents</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">file_id</span></div>

<div class="viewcode-block" id="DataClient.tabular_data_capture_upload"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.tabular_data_capture_upload">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">tabular_data_capture_upload</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tabular_data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
        <span class="n">part_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">component_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">component_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">method_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">data_request_times</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="n">datetime</span><span class="p">]],</span>
        <span class="n">method_parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Upload tabular sensor data.</span>

<span class="sd">        Upload tabular data collected on a robot through a specific component (for example, a motor) along with the relevant metadata to</span>
<span class="sd">        app.viam.com. Tabular data can be found under the &quot;Sensors&quot; subtab of the Data tab on app.viam.com.</span>

<span class="sd">        ::</span>

<span class="sd">            from datetime import datetime</span>

<span class="sd">            time_requested = datetime(2023, 6, 5, 11)</span>
<span class="sd">            time_received = datetime(2023, 6, 5, 11, 0, 3)</span>
<span class="sd">            file_id = await data_client.tabular_data_capture_upload(</span>
<span class="sd">                part_id=&quot;INSERT YOUR PART ID&quot;,</span>
<span class="sd">                component_type=&#39;rdk:component:movement_sensor&#39;,</span>
<span class="sd">                component_name=&#39;my_movement_sensor&#39;,</span>
<span class="sd">                method_name=&#39;Readings&#39;,</span>
<span class="sd">                tags=[&quot;sensor_data&quot;],</span>
<span class="sd">                data_request_times=[(time_requested, time_received)],</span>
<span class="sd">                tabular_data=[{</span>
<span class="sd">                    &#39;readings&#39;: {</span>
<span class="sd">                        &#39;linear_velocity&#39;: {&#39;x&#39;: 0.5, &#39;y&#39;: 0.0, &#39;z&#39;: 0.0},</span>
<span class="sd">                        &#39;angular_velocity&#39;: {&#39;x&#39;: 0.0, &#39;y&#39;: 0.0, &#39;z&#39;: 0.1}</span>
<span class="sd">                    }</span>
<span class="sd">                }]</span>
<span class="sd">            )</span>

<span class="sd">        Args:</span>
<span class="sd">            tabular_data (List[Mapping[str, Any]]): List of the data to be uploaded, represented tabularly as a collection of dictionaries.</span>
<span class="sd">                Must include the key &quot;readings&quot; for sensors.</span>
<span class="sd">            part_id (str): Part ID of the component used to capture the data.</span>
<span class="sd">            component_type (str): Type of the component used to capture the data (for example, &quot;rdk:component:movement_sensor&quot;).</span>
<span class="sd">            component_name (str): Name of the component used to capture the data.</span>
<span class="sd">            method_name (str): Name of the method used to capture the data.</span>
<span class="sd">            data_request_times (List[Tuple[datetime.datetime, datetime.datetime]]): List of tuples, each containing `datetime` objects</span>
<span class="sd">                denoting the times this data was requested[0] by the robot and received[1] from the appropriate sensor. Passing a list of</span>
<span class="sd">                tabular data and Timestamps with length n &gt; 1 will result in n datapoints being uploaded, all tied to the same metadata.</span>
<span class="sd">            method_parameters (Optional[Mapping[str, Any]]): Optional dictionary of method parameters. No longer in active use.</span>
<span class="sd">            tags (Optional[List[str]]): Optional list of tags to allow for tag-based data filtering when retrieving data.</span>

<span class="sd">        Raises:</span>
<span class="sd">            GRPCError: If an invalid part ID is passed.</span>
<span class="sd">            ValueError: If a list of `Timestamp` objects is provided and its length does not match the length of the list of tabular</span>
<span class="sd">                data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The file_id of the uploaded data.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#tabulardatacaptureupload&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sensor_contents</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_request_times</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tabular_data</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;data_request_times and tabular_data lengths must be equal.&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">tab</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tabular_data</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">()</span>
            <span class="n">s</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
            <span class="n">sensor_contents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">SensorData</span><span class="p">(</span>
                    <span class="n">metadata</span><span class="o">=</span><span class="p">(</span>
                        <span class="n">SensorMetadata</span><span class="p">(</span>
                            <span class="n">time_requested</span><span class="o">=</span><span class="n">datetime_to_timestamp</span><span class="p">(</span><span class="n">data_request_times</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="n">data_request_times</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                            <span class="n">time_received</span><span class="o">=</span><span class="n">datetime_to_timestamp</span><span class="p">(</span><span class="n">data_request_times</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="k">if</span> <span class="n">data_request_times</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="k">if</span> <span class="n">data_request_times</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
                        <span class="k">else</span> <span class="kc">None</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">data_request_times</span>
                    <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="n">struct</span><span class="o">=</span><span class="n">s</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="n">metadata</span> <span class="o">=</span> <span class="n">UploadMetadata</span><span class="p">(</span>
            <span class="n">part_id</span><span class="o">=</span><span class="n">part_id</span><span class="p">,</span>
            <span class="n">component_type</span><span class="o">=</span><span class="n">component_type</span><span class="p">,</span>
            <span class="n">component_name</span><span class="o">=</span><span class="n">component_name</span><span class="p">,</span>
            <span class="n">method_name</span><span class="o">=</span><span class="n">method_name</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">DataType</span><span class="o">.</span><span class="n">DATA_TYPE_TABULAR_SENSOR</span><span class="p">,</span>
            <span class="n">method_parameters</span><span class="o">=</span><span class="n">method_parameters</span><span class="p">,</span>
            <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_capture_upload</span><span class="p">(</span><span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">sensor_contents</span><span class="o">=</span><span class="n">sensor_contents</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">file_id</span></div>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_data_capture_upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata</span><span class="p">:</span> <span class="n">UploadMetadata</span><span class="p">,</span> <span class="n">sensor_contents</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">SensorData</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">DataCaptureUploadResponse</span><span class="p">:</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">DataCaptureUploadRequest</span><span class="p">(</span><span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">sensor_contents</span><span class="o">=</span><span class="n">sensor_contents</span><span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">DataCaptureUploadResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_sync_client</span><span class="o">.</span><span class="n">DataCaptureUpload</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>

<div class="viewcode-block" id="DataClient.streaming_data_capture_upload"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.streaming_data_capture_upload">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">streaming_data_capture_upload</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">part_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">file_ext</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">component_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">component_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">method_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">method_parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">data_request_times</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="n">datetime</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Uploads the metadata and contents of streaming binary data.</span>

<span class="sd">        ::</span>

<span class="sd">            time_requested = datetime(2023, 6, 5, 11)</span>
<span class="sd">            time_received = datetime(2023, 6, 5, 11, 0, 3)</span>

<span class="sd">            file_id = await data_client.streaming_data_capture_upload(</span>
<span class="sd">                data=&quot;byte-data-to-upload&quot;,</span>
<span class="sd">                part_id=&quot;INSERT YOUR PART ID&quot;,</span>
<span class="sd">                file_ext=&quot;png&quot;,</span>
<span class="sd">                component_type=&#39;motor&#39;,</span>
<span class="sd">                component_name=&#39;left_motor&#39;,</span>
<span class="sd">                method_name=&#39;IsPowered&#39;,</span>
<span class="sd">                data_request_times=[time_requested, time_received],</span>
<span class="sd">                tags=[&quot;tag_1&quot;, &quot;tag_2&quot;]</span>
<span class="sd">            )</span>

<span class="sd">        Args:</span>
<span class="sd">            data (bytes): the data to be uploaded.</span>
<span class="sd">            part_id (str): Part ID of the resource associated with the file.</span>
<span class="sd">            file_ext (str): file extension type for the data. required for determining MIME type.</span>
<span class="sd">            component_type (Optional[str]): Optional type of the component associated with the file (for example, &quot;movement_sensor&quot;).</span>
<span class="sd">            component_name (Optional[str]): Optional name of the component associated with the file.</span>
<span class="sd">            method_name (Optional[str]): Optional name of the method associated with the file.</span>
<span class="sd">            method_parameters (Optional[str]): Optional dictionary of the method parameters. No longer in active use.</span>
<span class="sd">            data_request_times (Optional[Tuple[datetime.datetime, datetime.datetime]]): Optional tuple containing datetime objects</span>
<span class="sd">                denoting the times this data was requested[0] by the robot and received[1] from the appropriate sensor.</span>
<span class="sd">            tags (Optional[List[str]]): Optional list of tags to allow for tag-based filtering when retrieving data.</span>

<span class="sd">        Raises:</span>
<span class="sd">            GRPCError: If an invalid part ID is passed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The file_id of the uploaded data.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#streamingdatacaptureupload&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">upload_metadata</span> <span class="o">=</span> <span class="n">UploadMetadata</span><span class="p">(</span>
            <span class="n">part_id</span><span class="o">=</span><span class="n">part_id</span><span class="p">,</span>
            <span class="n">component_type</span><span class="o">=</span><span class="n">component_type</span> <span class="k">if</span> <span class="n">component_type</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">component_name</span><span class="o">=</span><span class="n">component_name</span> <span class="k">if</span> <span class="n">component_name</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">method_name</span><span class="o">=</span><span class="n">method_name</span> <span class="k">if</span> <span class="n">method_name</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">method_parameters</span><span class="o">=</span><span class="n">method_parameters</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">DataType</span><span class="o">.</span><span class="n">DATA_TYPE_BINARY_SENSOR</span><span class="p">,</span>
            <span class="n">file_extension</span><span class="o">=</span><span class="n">file_ext</span> <span class="k">if</span> <span class="n">file_ext</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;.&quot;</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="n">file_ext</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">sensor_metadata</span> <span class="o">=</span> <span class="n">SensorMetadata</span><span class="p">(</span>
            <span class="n">time_requested</span><span class="o">=</span><span class="n">datetime_to_timestamp</span><span class="p">(</span><span class="n">data_request_times</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="n">data_request_times</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">time_received</span><span class="o">=</span><span class="n">datetime_to_timestamp</span><span class="p">(</span><span class="n">data_request_times</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">if</span> <span class="n">data_request_times</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">DataCaptureUploadMetadata</span><span class="p">(</span><span class="n">upload_metadata</span><span class="o">=</span><span class="n">upload_metadata</span><span class="p">,</span> <span class="n">sensor_metadata</span><span class="o">=</span><span class="n">sensor_metadata</span><span class="p">)</span>
        <span class="n">request_metadata</span> <span class="o">=</span> <span class="n">StreamingDataCaptureUploadRequest</span><span class="p">(</span><span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">)</span>
        <span class="n">stream</span><span class="p">:</span> <span class="n">Stream</span><span class="p">[</span><span class="n">StreamingDataCaptureUploadRequest</span><span class="p">,</span> <span class="n">StreamingDataCaptureUploadResponse</span><span class="p">]</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_sync_client</span><span class="o">.</span><span class="n">StreamingDataCaptureUpload</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">request_metadata</span><span class="p">)</span>
            <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">StreamingDataCaptureUploadRequest</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">recv_message</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">recv_trailing_metadata</span><span class="p">()</span>  <span class="c1"># causes us to throw appropriate gRPC error</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Response cannot be empty&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">file_id</span></div>

<div class="viewcode-block" id="DataClient.file_upload"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.file_upload">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">file_upload</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">part_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">component_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">component_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">method_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">file_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">method_parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">file_extension</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Upload arbitrary file data.</span>

<span class="sd">        Upload file data that may be stored on a robot along with the relevant metadata to app.viam.com. File data can be found under the</span>
<span class="sd">        &quot;Files&quot; subtab of the Data tab on app.viam.com.</span>

<span class="sd">        ::</span>

<span class="sd">            file_id = await data_client.file_upload(</span>
<span class="sd">                data=b&quot;Encoded image bytes&quot;,</span>
<span class="sd">                part_id=&quot;INSERT YOUR PART ID&quot;,</span>
<span class="sd">                tags=[&quot;tag_1&quot;, &quot;tag_2&quot;],</span>
<span class="sd">                file_name=&quot;your-file&quot;,</span>
<span class="sd">                file_extension=&quot;.txt&quot;</span>
<span class="sd">            )</span>

<span class="sd">        Args:</span>
<span class="sd">            part_id (str): Part ID of the resource associated with the file.</span>
<span class="sd">            data (bytes): Bytes representing file data to upload.</span>
<span class="sd">            component_type (Optional[str]): Optional type of the component associated with the file (for example, &quot;movement_sensor&quot;).</span>
<span class="sd">            component_name (Optional[str]): Optional name of the component associated with the file.</span>
<span class="sd">            method_name (Optional[str]): Optional name of the method associated with the file.</span>
<span class="sd">            file_name (Optional[str]): Optional name of the file. The empty string &quot;&quot; will be assigned as the file name if one isn&#39;t</span>
<span class="sd">                provided.</span>
<span class="sd">            method_parameters (Optional[str]): Optional dictionary of the method parameters. No longer in active use.</span>
<span class="sd">            file_extension (Optional[str]): Optional file extension. The empty string &quot;&quot; will be assigned as the file extension if one isn&#39;t</span>
<span class="sd">                provided. Files with a .jpeg, .jpg, or .png extension will be saved to the images tab.</span>
<span class="sd">            tags (Optional[List[str]]): Optional list of tags to allow for tag-based filtering when retrieving data.</span>

<span class="sd">        Raises:</span>
<span class="sd">            GRPCError: If an invalid part ID is passed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: ID of the new file.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#fileupload&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">UploadMetadata</span><span class="p">(</span>
            <span class="n">part_id</span><span class="o">=</span><span class="n">part_id</span><span class="p">,</span>
            <span class="n">component_type</span><span class="o">=</span><span class="n">component_type</span> <span class="k">if</span> <span class="n">component_type</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">component_name</span><span class="o">=</span><span class="n">component_name</span> <span class="k">if</span> <span class="n">component_name</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">method_name</span><span class="o">=</span><span class="n">method_name</span> <span class="k">if</span> <span class="n">method_name</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">DataType</span><span class="o">.</span><span class="n">DATA_TYPE_FILE</span><span class="p">,</span>
            <span class="n">file_name</span><span class="o">=</span><span class="n">file_name</span> <span class="k">if</span> <span class="n">file_name</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">method_parameters</span><span class="o">=</span><span class="n">method_parameters</span><span class="p">,</span>
            <span class="n">file_extension</span><span class="o">=</span><span class="n">file_extension</span> <span class="k">if</span> <span class="n">file_extension</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">FileUploadResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_file_upload</span><span class="p">(</span><span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">file_contents</span><span class="o">=</span><span class="n">FileData</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">file_id</span></div>

<div class="viewcode-block" id="DataClient.file_upload_from_path"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.file_upload_from_path">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">file_upload_from_path</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">part_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">component_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">component_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">method_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">method_parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Upload arbitrary file data.</span>

<span class="sd">        Upload file data that may be stored on a robot along with the relevant metadata to app.viam.com. File data can be found under the</span>
<span class="sd">        &quot;Files&quot; subtab of the Data tab on app.viam.com.</span>

<span class="sd">        ::</span>

<span class="sd">            file_id = await data_client.file_upload_from_path(</span>
<span class="sd">                part_id=&quot;INSERT YOUR PART ID&quot;,</span>
<span class="sd">                tags=[&quot;tag_1&quot;, &quot;tag_2&quot;],</span>
<span class="sd">                filepath=&quot;/Users/&lt;your-username&gt;/&lt;your-directory&gt;/&lt;your-file.txt&gt;&quot;</span>
<span class="sd">            )</span>

<span class="sd">        Args:</span>
<span class="sd">            filepath (str): Absolute filepath of file to be uploaded.</span>
<span class="sd">            part_id (str): Part ID of the component associated with the file.</span>
<span class="sd">            component_type (Optional[str]): Optional type of the component associated with the file (for example, &quot;movement_sensor&quot;).</span>
<span class="sd">            component_name (Optional[str]): Optional name of the component associated with the file.</span>
<span class="sd">            method_name (Optional[str]): Optional name of the method associated with the file.</span>
<span class="sd">            method_parameters (Optional[str]): Optional dictionary of the method parameters. No longer in active use.</span>
<span class="sd">            tags (Optional[List[str]]): Optional list of tags to allow for tag-based filtering when retrieving data.</span>


<span class="sd">        Raises:</span>
<span class="sd">            GRPCError: If an invalid part ID is passed.</span>
<span class="sd">            FileNotFoundError: If the provided filepath is not found.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: ID of the new file.</span>

<span class="sd">        For more information, see `Data Client API &lt;https://docs.viam.com/dev/reference/apis/data-client/#fileuploadfrompath&gt;`_.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">stem</span>
        <span class="n">file_extension</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">suffix</span> <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">suffix</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="n">metadata</span> <span class="o">=</span> <span class="n">UploadMetadata</span><span class="p">(</span>
            <span class="n">part_id</span><span class="o">=</span><span class="n">part_id</span><span class="p">,</span>
            <span class="n">component_type</span><span class="o">=</span><span class="n">component_type</span> <span class="k">if</span> <span class="n">component_type</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">component_name</span><span class="o">=</span><span class="n">component_name</span> <span class="k">if</span> <span class="n">component_name</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">method_name</span><span class="o">=</span><span class="n">method_name</span> <span class="k">if</span> <span class="n">method_name</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">DataType</span><span class="o">.</span><span class="n">DATA_TYPE_FILE</span><span class="p">,</span>
            <span class="n">file_name</span><span class="o">=</span><span class="n">file_name</span><span class="p">,</span>
            <span class="n">method_parameters</span><span class="o">=</span><span class="n">method_parameters</span><span class="p">,</span>
            <span class="n">file_extension</span><span class="o">=</span><span class="n">file_extension</span> <span class="k">if</span> <span class="n">file_extension</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">FileUploadResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_file_upload</span><span class="p">(</span><span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">file_contents</span><span class="o">=</span><span class="n">FileData</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span> <span class="k">if</span> <span class="n">data</span> <span class="k">else</span> <span class="nb">bytes</span><span class="p">()))</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">file_id</span></div>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_file_upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata</span><span class="p">:</span> <span class="n">UploadMetadata</span><span class="p">,</span> <span class="n">file_contents</span><span class="p">:</span> <span class="n">FileData</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FileUploadResponse</span><span class="p">:</span>
        <span class="n">request_metadata</span> <span class="o">=</span> <span class="n">FileUploadRequest</span><span class="p">(</span><span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">)</span>
        <span class="n">request_file_contents</span> <span class="o">=</span> <span class="n">FileUploadRequest</span><span class="p">(</span><span class="n">file_contents</span><span class="o">=</span><span class="n">file_contents</span><span class="p">)</span>
        <span class="n">stream</span><span class="p">:</span> <span class="n">Stream</span><span class="p">[</span><span class="n">FileUploadRequest</span><span class="p">,</span> <span class="n">FileUploadResponse</span><span class="p">]</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_sync_client</span><span class="o">.</span><span class="n">FileUpload</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">request_metadata</span><span class="p">)</span>
            <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">request_file_contents</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">recv_message</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">stream</span><span class="o">.</span><span class="n">recv_trailing_metadata</span><span class="p">()</span>  <span class="c1"># causes us to throw appropriate gRPC error.</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Response cannot be empty&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span>

<div class="viewcode-block" id="DataClient.create_filter"><a class="viewcode-back" href="../../../autoapi/viam/app/data_client/index.html#viam.app.data_client.DataClient.create_filter">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">create_filter</span><span class="p">(</span>
        <span class="n">component_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">component_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">method</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">robot_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">robot_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">part_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">part_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">location_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">organization_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">mime_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">end_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">bbox_labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Filter</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;DataClient.create_filter is deprecated. Use utils.create_filter instead.&quot;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">create_filter</span><span class="p">(</span>
            <span class="n">component_name</span><span class="p">,</span>
            <span class="n">component_type</span><span class="p">,</span>
            <span class="n">method</span><span class="p">,</span>
            <span class="n">robot_name</span><span class="p">,</span>
            <span class="n">robot_id</span><span class="p">,</span>
            <span class="n">part_name</span><span class="p">,</span>
            <span class="n">part_id</span><span class="p">,</span>
            <span class="n">location_ids</span><span class="p">,</span>
            <span class="n">organization_ids</span><span class="p">,</span>
            <span class="n">mime_type</span><span class="p">,</span>
            <span class="n">start_time</span><span class="p">,</span>
            <span class="n">end_time</span><span class="p">,</span>
            <span class="n">tags</span><span class="p">,</span>
            <span class="n">bbox_labels</span><span class="p">,</span>
            <span class="n">dataset_id</span><span class="p">,</span>
        <span class="p">)</span></div></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2024, Viam Inc.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>