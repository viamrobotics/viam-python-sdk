:py:mod:`viam.app.data_client`
==============================

.. py:module:: viam.app.data_client


Module Contents
---------------

Classes
~~~~~~~

.. autoapisummary::

   viam.app.data_client.DataClient




Attributes
~~~~~~~~~~

.. autoapisummary::

   viam.app.data_client.LOGGER


.. py:data:: LOGGER

   

.. py:class:: DataClient(channel: grpclib.client.Channel, metadata: Mapping[str, str])


   gRPC client for uploading and retrieving data from app.

   Constructor is used by `ViamClient` to instantiate relevant service stubs. Calls to `DataClient` methods should be made through
   `ViamClient`.

   .. py:class:: TabularData(data: Mapping[str, Any], metadata: viam.proto.app.data.CaptureMetadata, time_requested: datetime.datetime, time_received: datetime.datetime)


      Class representing a piece of tabular data and associated metadata.

      :param data: the requested data.
      :type data: Mapping[str, Any]
      :param metadata: the metadata from the request.
      :type metadata: viam.proto.app.data.CaptureMetadata
      :param time_requested: the time the data request was sent.
      :type time_requested: datetime
      :param time_received: the time the requested data was received.
      :type time_received: datetime

      .. py:attribute:: data
         :type: Mapping[str, Any]

         

      .. py:attribute:: metadata
         :type: viam.proto.app.data.CaptureMetadata

         

      .. py:attribute:: time_requested
         :type: datetime.datetime

         

      .. py:attribute:: time_received
         :type: datetime.datetime

         

      .. py:method:: __str__() -> str

         Return str(self).


      .. py:method:: __eq__(other: DataClient) -> bool

         Return self==value.



   .. py:class:: BinaryData(data: bytes, metadata: viam.proto.app.data.BinaryMetadata)


      Class representing a piece of binary data and associated metadata.

      :param data: the requested data.
      :type data: bytes
      :param metadata: the metadata from the request.
      :type metadata: viam.proto.app.data.BinaryMetadata

      .. py:attribute:: data
         :type: bytes

         

      .. py:attribute:: metadata
         :type: viam.proto.app.data.BinaryMetadata

         

      .. py:method:: __str__() -> str

         Return str(self).


      .. py:method:: __eq__(other: DataClient) -> bool

         Return self==value.



   .. py:method:: tabular_data_by_filter(filter: Optional[viam.proto.app.data.Filter] = None, dest: Optional[str] = None) -> List[TabularData]
      :async:

      Filter and download tabular data.

      :param filter: Optional `Filter` specifying tabular data to retrieve. No `Filter` implies all tabular
                     data.
      :type filter: viam.proto.app.data.Filter
      :param dest: Optional filepath for writing retrieved data.
      :type dest: str

      :returns: The tabular data.
      :rtype: List[Mapping[str, Any]]


   .. py:method:: binary_data_by_filter(filter: Optional[viam.proto.app.data.Filter] = None, dest: Optional[str] = None) -> List[BinaryData]
      :async:

      Filter and download binary data.

      :param filter: Optional `Filter` specifying binary data to retrieve. No `Filter` implies all binary data.
      :type filter: viam.proto.app.data.Filter
      :param dest: Optional filepath for writing retrieved data.
      :type dest: str

      :returns: The binary data.
      :rtype: List[bytes]


   .. py:method:: binary_data_by_ids(binary_ids: List[viam.proto.app.data.BinaryID], dest: Optional[str] = None) -> List[BinaryData]
      :async:

      Filter and download binary data.

      :param binary_ids: `BinaryID` objects specifying the desired data. Must be non-empty.
      :type binary_ids: List[viam.proto.app.data.BinaryID]
      :param dest: Optional filepath for writing retrieved data.
      :type dest: str

      :raises GRPCError: If no `BinaryID` objects are provided.

      :returns: The binary data.
      :rtype: List[bytes]


   .. py:method:: delete_tabular_data_by_filter(filter: Optional[viam.proto.app.data.Filter]) -> int
      :async:

      Filter and delete tabular data.

      :param filter: Optional `Filter` specifying tabular data to delete. Passing an empty `Filter` will lead to
                     all data being deleted. Exercise caution when using this option.
      :type filter: viam.proto.app.data.Filter


   .. py:method:: delete_binary_data_by_filter(filter: Optional[viam.proto.app.data.Filter]) -> int
      :async:

      Filter and delete binary data.

      :param filter: Optional `Filter` specifying binary data to delete. Passing an empty `Filter` will lead to
                     all data being deleted. Exercise caution when using this option.
      :type filter: viam.proto.app.data.Filter


   .. py:method:: delete_binary_data_by_ids(binary_ids: List[viam.proto.app.data.BinaryID]) -> int
      :async:

      Filter and delete binary data.

      :param binary_ids: `BinaryID` objects specifying the data to be deleted. Must be non-empty.
      :type binary_ids: List[viam.proto.app.data.BinaryID]

      :raises GRPCError: If no `BinaryID` objects are provided.

      :returns: The number of items deleted.
      :rtype: int


   .. py:method:: add_tags_to_binary_data_by_ids(tags: List[str], binary_ids: List[viam.proto.app.data.BinaryID]) -> None
      :async:

      Add tags to binary data.

      :param tags: List of tags to add to specified binary data. Must be non-empty.
      :type tags: List[str]
      :param binary_ids: List of `BinaryID` objects specifying binary data to tag. Must be non-empty.
      :type binary_ids: List[viam.app.proto.BinaryID]

      :raises GRPCError: If no `BinaryID` objects or tags are provided.


   .. py:method:: add_tags_to_binary_data_by_filter(tags: List[str], filter: Optional[viam.proto.app.data.Filter] = None) -> None
      :async:

      Add tags to binary data.

      :param tags: List of tags to add to specified binary data. Must be non-empty.
      :type tags: List[str]
      :param filter: `Filter` specifying binary data to tag. If no `Filter` is provided, all data will be
                     tagged.
      :type filter: viam.proto.app.data.Filter

      :raises GRPCError: If no tags are provided.


   .. py:method:: remove_tags_from_binary_data_by_ids(tags: List[str], binary_ids: List[viam.proto.app.data.BinaryID]) -> int
      :async:

      Remove tags from binary.

      :param tags: List of tags to remove from specified binary data. Must be non-empty.
      :type tags: List[str]
      :param file_ids: List of `BinaryID` objects specifying binary data to untag. Must be non-empty.
      :type file_ids: List[str]

      :raises GRPCError: If no binary_ids or tags are provided.

      :returns: The number of tags removed.
      :rtype: int


   .. py:method:: remove_tags_from_binary_data_by_filter(tags: List[str], filter: Optional[viam.proto.app.data.Filter] = None) -> int
      :async:

      Remove tags from binary data.

      :param tags: List of tags to remove from specified binary data.
      :type tags: List[str]
      :param filter: `Filter` specifying binary data to untag. If no `Filter` is provided, all data will be
                     tagged.
      :type filter: viam.proto.app.data.Filter

      :raises GRPCError: If no tags are provided.

      :returns: The number of tags removed.
      :rtype: int


   .. py:method:: tags_by_filter(filter: Optional[viam.proto.app.data.Filter] = None) -> List[str]
      :async:

      Get a list of tags using a filter.

      :param filter: `Filter` specifying data to retrieve from. If no `Filter` is provided, all data tags will
                     return.
      :type filter: viam.proto.app.data.Filter

      :returns: The list of tags.
      :rtype: List[str]


   .. py:method:: add_bounding_box_to_image_by_id()
      :abstractmethod:
      :async:


   .. py:method:: remove_bounding_box_from_image_by_id()
      :abstractmethod:
      :async:


   .. py:method:: bounding_box_labels_by_filter(filter: Optional[viam.proto.app.data.Filter] = None) -> List[str]
      :async:

      Get a list of bounding box labels using a `Filter`.

      :param filter: `Filter` specifying data to retrieve from. If no `Filter` is provided, all labels will
                     return.
      :type filter: viam.proto.app.data.Filter

      :returns: The list of bounding box labels.
      :rtype: List[str]


   .. py:method:: binary_data_capture_upload(binary_data: bytes, part_id: str, component_type: str, component_name: str, method_name: str, method_parameters: Optional[Mapping[str, Any]] = None, tags: Optional[List[str]] = None, data_request_times: Optional[Tuple[datetime.datetime, datetime.datetime]] = None) -> None
      :async:

      Upload binary sensor data.

      Sync binary data collected on a robot through a specific component (e.g., a motor) along with the relevant metadata with
      app.viam.com. Binary data can be found under the "Files" tab in Data on app.viam.com.

      :param binary_data: The data to be uploaded, respresented in bytes.
      :type binary_data: bytes
      :param part_id: Part ID of the component used to capture the data.
      :type part_id: str
      :param component_type: Type of the component used to capture the data (e.g., "movement_sensor").
      :type component_type: str
      :param component_name: Name of the component used to capture the data.
      :type component_name: str
      :param method_name: Name of the method used to capture the data.
      :type method_name: str
      :param method_parameters: Optional dictionary of method parameters. No longer in active use.
      :type method_parameters: Optional[Mapping[str, Any]]
      :param tags: Optional list of tags to allow for tag-based data filtering when retrieving data.
      :type tags: Optional[List[str]]
      :param data_request_times: Optional tuple containing `datetime`s objects
                                 denoting the times this data was requested[0] and received[1] by the appropriate sensor.
      :type data_request_times: Optional[Tuple[datetime.datetime, datetime.datetime]]

      :raises GRPCError: If an invalid part ID is passed.


   .. py:method:: tabular_data_capture_upload(tabular_data: List[Mapping[str, Any]], part_id: str, component_type: str, component_name: str, method_name: str, method_parameters: Optional[Mapping[str, Any]] = None, tags: Optional[List[str]] = None, data_request_times: Optional[List[Tuple[datetime.datetime, datetime.datetime]]] = None) -> None
      :async:

      Upload tabular sensor data.

      Sync tabular data collected on a robot through a specific component (e.g., a motor) along with the relevant metadata with
      app.viam.com. Tabular data can be found under the "Sensors" tab in Data on app.viam.com.

      :param tabular_data: List of the data to be uploaded, represented tabularly as a collection of dictionaries.
      :type tabular_data: List[Mapping[str, Any]]
      :param part_id: Part ID of the component used to capture the data.
      :type part_id: str
      :param component_type: Type of the component used to capture the data (e.g., "movement_sensor").
      :type component_type: str
      :param component_name: Name of the component used to capture the data.
      :type component_name: str
      :param method_name: Name of the method used to capture the data.
      :type method_name: str
      :param method_parameters: Optional dictionary of method parameters. No longer in active use.
      :type method_parameters: Optional[Mapping[str, Any]]
      :param tags: Optional list of tags to allow for tag-based data filtering when retrieving data.
      :type tags: Optional[List[str]]
      :param data_request_times: Optional list of tuples, each containing
                                 `datetime` objects denoting the times this data was requested[0] and received[1] by the appropriate sensor.
      :type data_request_times: Optional[List[Tuple[datetime.datetime, datetime.datetime]]]

      Passing a list of tabular data and Timestamps with length n > 1 will result in n datapoints being uploaded, all tied to the same
      metadata.

      :raises GRPCError: If an invalid part ID is passed.
      :raises AssertionError: If a list of `Timestamp` objects is provided and its length does not match the length of the list of tabular
          data.


   .. py:method:: file_upload(part_id: str, component_type: Optional[str] = None, component_name: Optional[str] = None, method_name: Optional[str] = None, file_name: Optional[str] = None, method_parameters: Optional[Mapping[str, Any]] = None, file_extension: Optional[str] = None, tags: Optional[List[str]] = None, data: Optional[bytes] = None) -> None
      :async:

      Upload arbitrary file data.

      Sync file data that may be stored on a robot along with the relevant metadata to app.viam.com.

      :param part_id: Part ID of the resource associated with the file.
      :type part_id: str
      :param component_type: Optional type of the component associated with the file (e.g., "movement_sensor").
      :type component_type: Optional[str]
      :param component_name: Optional name of the component associated with the file.
      :type component_name: Optional[str]
      :param method_name: Optional name of the method associated with the file.
      :type method_name: Optional[str]
      :param file_name: Optional name of the file. The empty string "" will be assigned as the file name if a one isn't
                        provided.
      :type file_name: Optional[str]
      :param method_parameters: Optional dictionary of the method parameters. No longer in active use.
      :type method_parameters: Optional[str]
      :param file_extension: Optional file extension. The empty string "" will be assigned as the file extension if one isn't
                             provided.
      :type file_extension: Optional[str]
      :param tags: Optional list of tags to allow for tag-based filtering when retrieving data.
      :type tags: Optional[List[str]]
      :param data: (Optional[bytes]): Optional bytes representing file data to upload.

      :raises GRPCError: If an invalid part ID is passed.


   .. py:method:: file_upload_from_path(filepath: str, part_id: str, component_type: Optional[str] = None, component_name: Optional[str] = None, method_name: Optional[str] = None, method_parameters: Optional[Mapping[str, Any]] = None, tags: Optional[List[str]] = None) -> None
      :async:

      Upload arbitrary file data.

      Sync file data that may be stored on a robot along with the relevant metadata to app.viam.com.

      :param filepath: Absolute filepath of file to be uploaded.
      :type filepath: str
      :param part_id: Part ID of the component associated with the file.
      :type part_id: str
      :param component_type: Optional type of the component associated with the file (e.g., "movement_sensor").
      :type component_type: Optional[str]
      :param component_name: Optional name of the component associated with the file.
      :type component_name: Optional[str]
      :param method_name: Optional name of the method associated with the file.
      :type method_name: Optional[str]
      :param method_parameters: Optional dictionary of the method parameters. No longer in active use.
      :type method_parameters: Optional[str]
      :param tags: Optional list of tags to allow for tag-based filtering when retrieving data.
      :type tags: Optional[List[str]]

      :raises GRPCError: If an invalid part ID is passed.
      :raises FileNotFoundError: If the provided filepath is not found.


   .. py:method:: create_filter(component_name: Optional[str] = None, component_type: Optional[str] = None, method: Optional[str] = None, robot_name: Optional[str] = None, robot_id: Optional[str] = None, part_name: Optional[str] = None, part_id: Optional[str] = None, location_ids: Optional[List[str]] = None, organization_ids: Optional[List[str]] = None, mime_type: Optional[List[str]] = None, start_time: Optional[datetime.datetime] = None, end_time: Optional[datetime.datetime] = None, tags: Optional[List[str]] = None, bbox_labels: Optional[List[str]] = None) -> viam.proto.app.data.Filter
      :staticmethod:

      Create a `Filter`.

      :param component_name: Optional name of the component that captured the data being filtered (e.g., "left_motor").
      :type component_name: Optional[str]
      :param component_type: Optional type of the componenet that captured the data being filtered (e.g., "motor").
      :type component_type: Optional[str]
      :param method: Optional name of the method used to capture the data being filtered (e.g., "IsPowered").
      :type method: Optional[str]
      :param robot_name: Optional name of the robot associated with the data being filtered (e.g., "viam_rover_1").
      :type robot_name: Optional[str]
      :param robot_id: Optional ID of the robot associated with the data being filtered.
      :type robot_id: Optional[str]
      :param part_name: Optional name of the system part associated with the data being filtered (e.g., "viam_rover_1-main").
      :type part_name: Optional[str]
      :param part_id: Optional ID of the system part associated with the data being filtered.
      :type part_id: Optional[str]
      :param location_ids: Optional list of location IDs associated with the data being filtered.
      :type location_ids: Optional[List[str]]
      :param organization_ids: Optional list of organization IDs associated with the data being filtered.
      :type organization_ids: Optional[List[str]]
      :param mime_type: Optional mime type of data being filtered (e.g., "image/png").
      :type mime_type: Optional[List[str]]
      :param start_time: Optional start time of an interval to filter data by.
      :type start_time: Optional[datetime.datetime]
      :param end_time: Optional end time of an interval to filter data by.
      :type end_time: Optional[datetime.datetime]
      :param tags: Optional list of tags attached to the data being filtered (e.g., ["test"]).
      :type tags: Optional[List[str]]
      :param bbox_labels: Optional list of bounding box labels attached to the data being filtered (e.g., ["square",
                          "circle"]).
      :type bbox_labels: Optional[List[str]]

      :returns: The `Filter` object.
      :rtype: viam.proto.app.data.Filter



